webpackJsonp([5],{1:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){return t.clientWidth}Object.defineProperty(e,"__esModule",{value:!0}),e.getClientWidth=i;var r=a(12),o=n(r),s=a(133),u=n(s);!function(){if(!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))try{Object.defineProperty(SVGElement.prototype,"classList",Object.getOwnPropertyDescriptor(HTMLElement.prototype,"classList")||Object.getOwnPropertyDescriptor(Element.prototype,"classList"))}catch(t){}}(),e.default={stringToHTML:function(t){var e=document.createElement("div");return e.innerHTML=t,e.childNodes},arrayFromNodeList:function(t){return[].slice.call(t)},withNodeList:function(t,e){return"string"==typeof t&&(t=this.stringToHTML(t)),t instanceof HTMLElement&&(t=[t]),(t instanceof NodeList||Array.isArray(t))&&Array.prototype.slice.call(t).forEach(function(t){return e(t)}),this},append:function(t,e){void 0===e&&(e=t,t=document.body);var a=function(e){return t.appendChild(e)};return this.withNodeList(e,a)},prepend:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;void 0===e&&(e=t,t=document.body);var n=t.children[a],i=function(e){return t.insertBefore(e,n)};return this.withNodeList(e,i)},remove:function(){for(var t=[],e=arguments.length,a=Array(e),n=0;n<e;n++)a[n]=arguments[n];return a.forEach(function(e){e instanceof Element&&e.parentNode&&t.push(e.parentNode.removeChild(e))}),t},find:function(t,e){return Array.prototype.slice.call(t.querySelectorAll(e))},findOne:function(t,e){return t.querySelector(e)},closest:function(t,e){return(0,u.default)(t,e,!0)},addClass:function(t,e){Array.isArray(t)||(t=[t]);var a=e.split(" ");t.forEach(function(t){return a.forEach(function(e){return t.classList.add(e)})})},removeClass:function(t,e){Array.isArray(t)||(t=[t]);var a=e.split(" ");t.forEach(function(t){return a.forEach(function(e){return t.classList.remove(e)})})},hasClass:function(t,e){return Array.isArray(t)||(t=[t]),t.some(function(t){return t.classList.contains(e)})},toggleClass:function(t,e){Array.isArray(t)||(t=[t]),"string"==typeof t&&(t=this.find(t)),e.split(" ").forEach(function(e){return t.forEach(function(t){return t.classList.toggle(e)})})},getViewPosition:function(t,e,a){var n=t.getBoundingClientRect(),i=o.default.getViewportHeight();e=e||0,a=a||0;var r={top:0-e,bottom:i+e},s={top:n.top-a,bottom:n.bottom-a};return{isHidden:function(){return!t.offsetParent},isWithinViewport:function(){return s.top>=0&&s.bottom<=i},isWithinLookahead:function(){return s.top>=r.top&&s.bottom<=r.bottom},isPartiallyInViewport:function(){return s.top>=0&&s.top<=i||s.bottom>0&&s.bottom<i},isPartiallyInLookahead:function(){return s.top>0?s.top<e+i:s.bottom>0||Math.abs(s.bottom)<e},isNearBottom:function(){return n.bottom<=e}}},on:function(t,e,a,n){"function"==typeof a&&void 0===n&&(n=a,a=null),e.split(" ").forEach(function(e){return t.addEventListener(e,n)})},one:function(t,e,a,n){var i=this;"function"==typeof a&&(n=a,a=null);var r=function a(r){n.call(this,r),i.off(t,e,a)};i.on(t,e,r)},off:function(t,e,a){e.split(" ").forEach(function(e){return t.removeEventListener(e,a)})},trigger:function(t,e){document.createEvent&&e.split(" ").forEach(function(e){var a=document.createEvent("Event");a.initEvent&&(a.initEvent(e,!1,!0),t.dispatchEvent(a))})},hide:function(t,e){var a=e?this.find(t,e):t;return this.addClass(a,"js-hidden"),this},show:function(t,e){var a=this,n=e?this.find(t,e):t;return this.hasClass(n,"js-hidden")?this.removeClass(n,"js-hidden"):(Array.isArray(n)||(n=[n]),n.forEach(function(t){return a.setStyle(t,{display:"block"})})),this},getData:function(t,e){return"string"==typeof t&&(t=this.stringToHTML(t)[0]),t.getAttribute("data-"+e)},setData:function(t,e,a){return"string"==typeof t&&(t=this.stringToHTML(t)[0]),t.setAttribute("data-"+e,a),!0},getStyle:function(t,e){return t.style[e]},setStyle:function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t.style[a]=e[a]);return this},getAttr:function(t,e){return t.getAttribute(e)},setAttr:function(t,e){for(var a in e)e.hasOwnProperty(a)&&t.setAttribute(a,e[a]);return this},removeAttr:function(t,e){return t.removeAttribute(e),this},hasAttr:function(t,e){return t.hasAttribute(e)},getText:function(t,e){var a=e?this.findOne(t,e):t;return a?a.textContent:""},setText:function(t,e,a){var n=a?this.findOne(t,a):t;return n&&(n.textContent=e),this},setHTML:function(t,e,a){var n=a?this.findOne(t,a):t;return n&&(n.innerHTML=e),this},parent:function(t,e){return(0,u.default)(t,e)},getModuleConfig:function(t,e){return e?this.findOne(t,"script"):t.innerHTML.match(/<script .*script>/)[0]},createElement:function(t,e){var a=document.createElement(t);return this.setAttr(a,e),a},scrollIntoView:function(t,e){var a=this;e?setTimeout(function(){a.scrollIntoView(t)},e):t.scrollIntoView?t.scrollIntoView():window.scrollTo(0,t.offsetTop)},offset:function(t,e){var a=e?this.findOne(t,e):t;return a?{top:a.offsetTop,left:a.offsetLeft}:{}},size:function(t){return{width:t.offsetWidth,height:t.offsetHeight}},getClientWidth:i}},12:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=document.documentElement,i=function(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect}(),r=function(){try{return localStorage.setItem("ls_test",!0),localStorage.removeItem("ls_test"),!0}catch(t){return!1}}();i||n.classList.add("no-svg"),(navigator.userAgent.match(/Pinterest/i)||document.referrer.match(/pinterest.com/i))&&n.classList.add("pinterest"),e.default={hasTouch:function(){var t="ontouchstart"in window;return t&&n.classList.add("has-touch"),t}(),os:function(){return navigator.userAgent.match(/android/i)?(n.classList.add("is-android"),"android"):navigator.userAgent.match(/iphone|ipad|ipod/i)?(n.classList.add("is-ios"),"ios"):""}(),referrer:function(){var t=document.referrer,e=window.location.search,a=navigator.userAgent.match(/fban|twitter|pinterest/i),n=a?a[0]:"";return e.match("referrer=pinterest")||t.match("pinterest")||"pinterest"===n?"pinterest":e.match("referrer=twitter")||t.match("t.co")||"twitter"===n?"tweet":e.match("referrer=facebook")||t.match("m.facebook")||"fban"===n?"facebook":""}(),supportsLocalStorage:r,isVideoSupported:function(){return"android"===this.os},autoplaysVideo:function(){return!1},getViewportHeight:function(){return window.innerHeight||n.clientHeight},getViewportWidth:function(){return window.innerWidth||n.clientWidth}}},126:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e,a,n,i,r){this.t=t||"",this.n=e||"",this.l=a||"",this.d=n||"",this.data=(0,c.default)(i)?i:{},this.opt=(0,c.default)(r)?r:{}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(10),o=n(r),s=a(20),u=n(s),d=a(11),c=n(d);i.tryParse=function(t){var e=(0,o.default)(t,"t",""),a=(0,o.default)(t,"n","");return(0,u.default)(e)&&0!==e.length&&(0,u.default)(a)&&0!==a.length?new i(e,a,(0,o.default)(t,"l",""),(0,o.default)(t,"d",""),(0,o.default)(t,"data",{}),(0,o.default)(t,"opt",{})):null},e.default=i},127:function(t,e,a){"use strict";function n(t){if(null===t||void 0===t||!("string"==typeof t||t instanceof String))return null;var e=t.match(v);return{url:e[0]?e[0]:"",scheme:e[2]?e[2]:"",host:e[4]?e[4]:"",path:e[5]?e[5]:"",cleanedPath:e[5]?e[5]:"",query:e[7]?e[7]:"",fragment:e[9]?e[9]:""}}function i(t){return!(t.scheme.length>0&&t.host.length>0&&-1===t.host.indexOf("buzzfeed.com")||0===t.url.indexOf("javascript:;"))}function r(t){return!(!t.host||!t.scheme||t.host.indexOf("buzzfeed.com")>-1||-1===t.scheme.indexOf("http"))}function o(t){return t.path+(t.query?"?"+t.query:"")}function s(t){return t.url}function u(t){var e=n(t);return null===e?"":r(e)?s(e):i(e)?o(e):""}function d(t){return!(t&&t.ignore instanceof Array)||-1===t.ignore.indexOf("bfaBinder")&&-1===t.ignore.indexOf("all")||t.force instanceof Array&&-1!==t.force.indexOf("bfaBinder")}function c(t,e){if(null===t||"A"!==t.nodeName||t.hasAttribute("data-bfa"))return!1;var a=t.getAttribute("href"),r=n(a);if(null===r||!i(r))return!1;var s=new m.default,u=["track/click/Nav-Link",{t:"click",n:"Nav-Link",l:s.findLocation(t),data:{url:o(r)}}];return e&&window[e]instanceof Function&&window[e].apply(this,u),!0}function l(t,e){if(null===t||"A"!==t.nodeName||t.hasAttribute("data-bfa"))return!1;var a=t.getAttribute("href"),i=n(a);if(!i||!r(i))return!1;var o=new m.default,u=["track/click/Exit-Link",{t:"click",n:"Exit-Link",l:o.findLocation(t),data:{url:s(i),anchorDesc:t.innerHTML}}];return e&&window[e]instanceof Function&&window[e].apply(this,u),!0}function p(t,e){if(null===t||"SELECT"!==t.nodeName)return!1;var a=t.options[t.selectedIndex];if(!a)return!1;if(!a.hasAttribute("data-bfa"))return!1;var n=new m.default,i=n.parse(a);if(!d(i.options))return!1;a.hasAttribute("data-href")&&(i.data.url=u(a.getAttribute("data-href")));var r=["track/click/"+i.action,{t:"click",n:i.action,l:i.location,d:i.description,data:i.data,opt:i.options}];return e&&window[e]instanceof Function&&window[e].apply(this,r),!0}function f(t,e,a){if(null===t||"A"!==t.nodeName||!t.hasAttribute("data-bfa"))return!1;var n=new m.default,i=n.parse(t);if(!d(i.options))return!1;i.data.url=u(t.getAttribute("href"));var r=["track/"+a+"/"+i.action,{t:a,n:i.action,l:i.location,d:i.description,data:i.data,opt:i.options}];return e&&window[e]instanceof Function&&window[e].apply(this,r),!0}function h(t,e,a){if(null===t||!t.hasAttribute("data-bfa"))return!1;var n=new m.default,i=n.parse(t);if(!d(i.options))return!1;var r=["track/"+a+"/"+i.action,{t:a,n:i.action,l:i.location,d:i.description,data:i.data,opt:i.options}];return e&&window[e]instanceof Function&&window[e].apply(this,r),!0}Object.defineProperty(e,"__esModule",{value:!0});var g=a(52),m=function(t){return t&&t.__esModule?t:{default:t}}(g),v=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?");e.default={ATagWithInternalLinkHandler:c,ATagWithExternalLinkHandler:l,ATagDefaultHandler:f,SelectTagChangedClickHandler:p,DefaultHandler:h}},132:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t in p)return p[t];var e=f[l];return e&&t in e?e[t]:h[t]}function r(t,e){var a={};(0,u.default)(t)?a=t:a[t]=e,(0,c.default)(p,a)}function o(t){if(!f[t])return void console.warn("Pixiedust: environment not recognized:",t);l=t}Object.defineProperty(e,"__esModule",{value:!0});var s=a(11),u=n(s),d=a(180),c=n(d),l="dev",p={},f={dev:{trackingURL:"https://pixiedust-dev.buzzfeed.com",debug:!0},stage:{trackingURL:"https://pixiedust-stage.buzzfeed.com",debug:!0},prod:{trackingURL:"https://pixiedust.buzzfeed.com",debug:!1}};f.live=f.prod;var h={apiVersion:"1",delay:200,urlLengthLimit:2e3,batch:!0,samplingRate:0,requiredFields:["type","source","session_id"],acceptedDataTypes:["string","boolean","number"]};e.default={init:o,get:i,set:r}},15:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){var e,a="",n=s.default.find(document.head,'meta[property="'+t+'"]');return n.length>0&&(e=s.default.getAttr(n[0],"content"))&&(a=e),a}function r(){return function(t){if(""===t)return{};for(var e={},a=0;a<t.length;++a){var n=t[a].split("=",2);1===n.length?e[n[0]]="":e[n[0]]=decodeURIComponent(n[1].replace(/\+/g," "))}return e}(window.location.search.substr(1).split("&"))}Object.defineProperty(e,"__esModule",{value:!0});var o=a(1),s=n(o),u=a(2),d=n(u),c=a(42),l=n(c),p=a(55),f=n(p),h=a(5),g=n(h),m=function(){var t=d.default.getQueryParams().sub;return t?parseInt(t.split("_")[1],10):null}();e.default={getUrl:function(){var t=f.default.addQueryString(""+location.origin+BZFD.Context.buzz.canonical_path),e=r();if(e.bfsource){var a="?";t.includes("?")&&(a="&"),t=""+t+a+"bfsource="+e.bfsource}return t},getCanonicalUrl:function(){var t=document.querySelector('link[rel="canonical"]');return t?t.href:this.getUrl()},getAuthor:function(){return i("author").replace(/,$/g,"")},getTitle:function(t){var e=BZFD.Context.page.title||document.title;return t&&BZFD.Context.page.promotions[t]?BZFD.Context.page.promotions[t].title||e:e},getDescription:function(t){var e=BZFD.Context.page.description;return t&&BZFD.Context.page.promotions[t]?BZFD.Context.page.promotions[t].description||e:e},getCaption:function(){var t=document.domain,e=this.getAuthor();return e&&(t+=" | By "+e),t},getPicture:function(t){var e=BZFD.Context.page.picture;return t&&BZFD.Context.page.promotions[t]?BZFD.Context.page.promotions[t].picture||e:e},getAll:function(){return{url:this.getUrl(),author:this.getAuthor(),title:this.getTitle(),description:this.getDescription(),caption:this.getCaption(),picture:this.getPicture()}},renderString:function(t,e,a){var n=d.default.extend({},this.getAll(),e||{});return l.default.renderString(t,n,a)},isLinkedSubbuzz:function(t){return null!==m&&m===t},getSubbuzzShareData:function(t,e){var a=d.default.removeHash(this.getUrl());return{text:d.default.trim(s.default.getText(t,".js-subbuzz__title-text")||this.getTitle()),url:a+"#"+e,fbUrl:d.default.addQueryParam(a,"sub","0_"+e)+"#"+e,media:this.getSubbuzzMedia(t)||this.getPicture()}},getQuizResultShareData:function(t,e){var a=d.default.removeHash(this.getUrl());return{url:a+"#"+t,fbUrl:d.default.addQueryParam(a,"quiz_result",t+"_"+e)+"#"+t}},recordShare:function(t){f.default.recordShare(t)},getSubbuzzMedia:function(t){var e=s.default.findOne(t,".js-progressive-image");if(!e)return"";var a=s.default.getAttr(e,"data-src"),n=s.default.getAttr(e,"data-gif-src");return g.default.isAny(["xs","sm"])&&(a=s.default.getAttr(e,"data-mobile-src")||a,n=s.default.getAttr(e,"data-mobile-gif-src")||n),n||a}}},16:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){var a=[],n=!0,i=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(a.push(o.value),!e||a.length!==e);n=!0);}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}return a}return function(e,a){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=a(28),o=n(r),s=a(42),u=n(s),d=window.BZFD.Context.page.localization,c=d.translations,l={de:["de"],en:["au","ca","in","uk","us"],es:["es","mx"],fr:["fr"],ja:["jp"],pt:["br"]};e.default={getEdition:function(t){var e=d.country,a=e.split("-"),n=i(a,2),r=n[0],s=n[1],u=void 0===s?"":s;if("en"===d.language){var c=o.default.get("country");"feedpager"!==t&&c||(c=u||"us");var p=c.split("-"),f=i(p,2);r=f[0],u=f[1],u||"es"===r||(u=r,r=Object.keys(l).filter(function(t){return-1!==l[t].indexOf(r)})[0])}return l[r]&&-1!==l[r].indexOf(u)?r+"-"+u:"es"===r?"es":"en-us"},getRawPageLanguage:function(){return-1!==Object.keys(l).indexOf(d.language)?d.language:"en"},getPageLocale:function(){return d.locale},getTranslation:function(t,e,a){if(!c[t])throw new Error("Missing translation "+t+" for "+this.getRawPageLanguage());var n=a?{delimiters:a}:{};return u.default.renderString(c[t],e,n)},getDateFormatTemplate:function(){switch(d.language){case"de":return"{{D}}. {{MM}} {{Y}}, {{H}}:{{m}} Uhr";case"es":return"{{D}} de {{MM}} de {{Y}}, {{h}}:{{m}} {{a}}";case"fr":return"{{D}} {{MM}}, {{Y}} &agrave; {{h}}:{{m}} {{a}}";case"ja":return"{{Y}}/{{M}}/{{D}} {{H}}:{{m}}";case"pt":return"{{D}} de {{MM}} de {{Y}}, {{h}}:{{m}} {{a}}";default:return"{{MM}} {{D}}, {{Y}}, at {{h}}:{{m}} {{a}}"}}}},17:function(t,e,a){"use strict";function n(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if("function"!=typeof window.bfa)return void(void 0!==window.raven&&window.raven.captureException(new Error("Instrumentation tracking issue: BFA is not available")));r.some(function(t){return a.hasOwnProperty(t)})&&(n=a,a={});var o=n,s=o.samplingRate,u={data:{target:t,value:e,tags:a}};s&&(s>1?"dev"===window.BZFD.Config.env&&console.error("Your sampling rate is above 100%."):Object.assign(u,{opts:{samplingRate:s}})),window.bfa(i.path,u)}Object.defineProperty(e,"__esModule",{value:!0}),e.instrument=n;var i=a(72),r=["samplingRate"]},196:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=a(30),r=n(i),o=a(10),s=n(o),u=a(313),d=n(u),c=a(331),l=n(c),p=a(339),f=n(p),h=a(340),g=n(h),m=a(341),v=n(m),b=a(332),y=n(b),_=a(306),k=n(_),T=a(307),w=n(T),M=a(342),F=n(M),S=a(343),C=n(S),I=a(333),P=n(I),x=a(344),E=n(x),O=a(334),z=n(O),B=a(308),R=n(B),N=a(345),A=n(N),D=a(335),j=n(D),L=a(309),q=n(L),V=a(346),H=n(V),U=a(336),G=n(U),Q=a(310),W=n(Q),Z=a(337),Y=n(Z),K=a(311),J=n(K),X=a(347),$=n(X),tt=a(348),et=n(tt),at=a(338),nt=n(at),it=a(312),rt=n(it),ot=a(349),st=n(ot),ut=a(350),dt=n(ut),ct=a(351),lt=n(ct);!function(){var t=new d.default.Core,e=window.BZFD.Context,a=window.BZFD.Config;if(void 0!==e&&"undefined"!==a){var n="prod"===a.env?"live":a.env,i={mode:"dev"===n?t.defs.bfaMode.develop:t.defs.bfaMode.prod,webRoot:a.webRoot,staticRoot:a.staticRoot,env:n,debug:document.location.search.indexOf("bfadebug=true")>-1,logLevel:document.location.search.indexOf("bfadebug")>-1?3:1},o={country:e.page.localization.country,type:"Buzz",platform:"bpager",language:e.page.localization.language,category:e.page.category,uri:{cleanedPath:document.location.pathname},classification:e.page.classification};(0,r.default)(e.buzz)||(o.post={id:e.buzz.id,author:e.buzz.username,authorId:e.buzz.authorId,language:e.page.localization.language,tags:e.buzz.tags,flags:{nsfw:1===e.buzz.flags.nsfw,ad:1===e.buzz.flags.ad,mobileSafe:1===e.buzz.flags.mobileSafe,partner:1===e.buzz.flags.partner,raw:1===e.buzz.flags.raw},isPromoted:1===parseInt(e.buzz.flags.ad,10),format:{type:e.buzz.format.type,width:e.buzz.format.width},published:e.buzz.published,publishedAgo:e.buzz.publishedAgo,uri:e.buzz.uri});var u={referrer:document.referrer};t.plugin(F.default,i).plugin(E.default).plugin(v.default).plugin(C.default).plugin(A.default).plugin(H.default).plugin(lt.default).plugin(dt.default).plugin(st.default).plugin(g.default).plugin($.default).plugin(et.default,{enabled:!0}).plugin(f.default,{bfaFunctionName:"bfa",domBinder:{delegatedMapping:{click:[{event:"click",selector:"a",options:{handlers:["ATagWithExternalLinkHandler","ATagWithInternalLinkHandler","ATagDefaultHandler"]}},{event:"click",selector:"input"},{event:"click",selector:"button"},{event:"click",selector:".js-subbuzz-quiz__answer"}]}},generalBinder:{pageExitBinder:!0},scrollBinder:{pixelMode:{enabled:!0},checkpoints:[25,50,75,100],bottomBounds:["#analytics-article-bottom"]},inViewImpressionBinder:{enabled:!0,locators:[".js-teaser__link",".js-now-buzzing__post-link",'[data-bfa-impressions="true"]']},videoBinder:{youtube:!0,facebook:!0}}),t.registerModule(l.default,{}).registerModule(Y.default,{configMapsDelegate:J.default,samplingRate:a.tracking.pixiedust.sampling_rate,poundSamplingRate:a.tracking.pixiedust.pound_sampling_rate,impressionsSamplingRate:a.tracking.pixiedust.impressions_sampling_rate,scrollDepthSamplingRate:a.tracking.pixiedust.scroll_depth_sampling_rate,instrumentationSamplingRate:a.tracking.pixiedust.instrumentation_sampling_rate,performanceSamplingRate:a.tracking.pixiedust.performance_sampling_rate}).registerModule(P.default,{extFilePath:(0,s.default)(a,"tracking.googleAnalytics.url","//www.google-analytics.com/analytics.js"),extTrackerGlobalName:(0,s.default)(a,"tracking.googleAnalytics.googleObjectName","ga"),googleAnalyticsId:(0,s.default)(a,"tracking.googleAnalytics.id"),configMapsDelegate:w.default,dimensions:[{id:"1",value:"bpager"},{id:"11",value:e.page.classification.edition},{id:"12",value:e.page.classification.section}]}).registerModule(nt.default,{extFilePath:(0,s.default)(a,"tracking.quantcast.url","https://secure.quantserve.com/quant.js"),extTrackerGlobalName:(0,s.default)(a,"tracking.quantcast.quantcastObjectName","_qevents"),quantcastPcode:(0,s.default)(a,"tracking.quantcast.pcode"),configMapsDelegate:rt.default}).registerModule(z.default,{extFilesPaths:["https://tags.crwdcntrl.net/c/6942/cc.js?ns=_cc6942"],configMapsDelegate:R.default}).registerModule(G.default,{configMapsDelegate:W.default,extFilesPaths:["https://s.pinimg.com/ct/core.js"]}).registerModule(j.default,{staticConfig:{apid:"P7A907367-6D97-4DFD-AF90-B51EDF8D9AC5",sfcode:"dcr",nsdkv:"511",apn:"BuzzFeed Webapp Static"},extFilesPaths:["https://cdn-gl.imrworldwide.com/novms/js/2/ggcmb510.js"],configMapsDelegate:q.default,trackers:["static"]}).registerModule(y.default,{extFilesPaths:["https://connect.facebook.net/en_US/fbevents.js"],configMapsDelegate:k.default}),t.activatePlugins(),t.push("general/page/update",o),t.push("general/user/update",u),t.domi.onDomReady(function(){t.push("plugin/binder/activate")}),t.activate()}}()},2:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isIOS=void 0;var n=a(10),i=function(t){return t&&t.__esModule?t:{default:t}}(n),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=a(17),s={};s.getKeys=function(t){var e;if(Object.keys)return Object.keys(t);e=[];for(var a in t)t.hasOwnProperty(a)&&e.push(a);return e},s.getUniqueEventName=function(t,e){return t+"-"+e.id},s.capitalize=function(t){return"string"!=typeof t?t:t.replace(/\w+/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},s.authBypassWrapper=function(t){if("dev"===BZFD.Config.env){var e="?";s.hasQueryString(t)&&(e="&"),t+=e+"eca385331012a621bc93fcda0a953a97"}return t},s.hasQueryString=function(t){return t.indexOf("?")>-1},s.removeHash=function(t){return t+="",t.indexOf("#")>-1?t.substr(0,t.indexOf("#")):t},s.removeQueryString=function(t){return t+="",t.indexOf("?")>-1?-1===t.indexOf("#")?t.substr(0,t.indexOf("?")):t.substr(0,t.indexOf("?"))+t.substr("#",t.length):t},s.getQueryString=function(t){t=s.removeHash(t);var e="";return t.indexOf("?")>-1&&(e=t.substr(t.indexOf("?"),t.length)),e},s.getHash=function(t){return t+="",t.indexOf("#")>-1?t.substr(t.indexOf("#"),t.length):""},s.queryStringToObject=function(t){if(""===t||void 0===t||null===t)return{};var e,a=t.split("&"),n={};return s.each(a,function(t,a){e=a.split("="),""===e[1]&&(e[1]=null),n[e[0]]=e[1]}),n},s.objectToQueryString=function(t){var e=[];return s.each(t,function(t,a){e.push(t+"="+a)}),"?"+e.join("&")},s.getBaseUrl=function(t){return t=s.removeHash(t),t=s.removeQueryString(t)},s.addParams=function(t,e){var a,n,i=s.getQueryString(t),r=s.getHash(t);return t=s.removeHash(t),t=s.removeQueryString(t),i=s.queryStringToObject(i.substr(1,i.length)),s.each(e,function(t,e){a=e[0],n=e[1],i[a]=n}),t+s.objectToQueryString(i)+r},s.removeParams=function(t,e){var a=s.getBaseUrl(t),n=s.getQueryString(t),i=s.getHash(t),r=s.queryStringToObject(n.substr(1,n.length));return s.each(e,function(t,e){delete r[e]}),a+s.objectToQueryString(r)+i},s.prepareUrl=function(t,e){var a=[];return s.each(e,function(t,e){void 0!==e&&a.push([t,encodeURIComponent(e)])}),s.addParams(t,a)},s.redirect=function(t){"string"==typeof t&&t&&(window.location.href=t)},s.openPopup=function(t,e){if("string"==typeof t&&t){var a="_blank",n="";if(e&&e.height&&e.width){var i=window.screen.height/2-e.height/2,r=window.screen.width/2-e.width/2;n="scrollbars=yes, toolbar=0, status=0, width="+e.width+", height="+e.height+", top="+i+", left="+r,a=e.name?e.name:a}window.open(t,a,n)}},s.scrollTo=function(t,e){void 0!==t&&void 0!==e&&window.scrollTo(t,e)},s.each=function(t,e){if(Array.isArray(t))t.forEach(function(t,a){return e(a,t)});else for(var a in t)t.hasOwnProperty(a)&&e(a,t[a])},s.extend=a(48),s.grep=function(t,e){return t.filter(e)},s.map=function(t,e){return t.map(e)},s.getQueryParams=function(){var t=window.location.search.substring(1),e={};return t&&t.split("&").forEach(function(t){var a=t.split("="),n=decodeURIComponent(a[0]),i=decodeURIComponent(a.slice(1).join("="));e[n]=i}),e},s.addQueryParam=function(t,e,a){return(t=t||window.location.href)+(t.split("?")[1]?"&":"?")+e+"="+a},s.largeNumberNotation=function(t){return t<1e3?t:t<1e4?t.toString().charAt(0)+","+t.toString().substring(1):t>=1e6?(t/1e6).toFixed(t%1e6!=0)+"M":(t/1e3).toFixed(t%1e3!=0)+"K"},s.numberWithCommas=function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},s.min=function(){return Math.min.apply(Math,Array.prototype.filter.call(arguments,function(t){return!isNaN(+t)}))},s.toQueryString=function(t){var e=[];return this.each(t,function(t,a){null!==a&&""!==a&&void 0!==a&&e.push(t+"="+a)}),e.join("&")},s.trim=function(t){return t&&t.trim&&t.trim()},s.getMessageHandler=function(t){return function(e,a){var n=t[e];"function"==typeof n&&n.call(this,a)}},s.getEventHandler=function(t){return function(e,a,n){var i=t[n];"function"==typeof i&&i.call(this,e,a)}},s.padLeft=function(t,e,a){for(var n=t.toString(),i=a-n.length,r="",o=0;o<i;o++)r+=e;return r+t},s.freeFormFormat=function(t){return t.replace(/["'"“’ ]/g,"").toLowerCase()},s.timeSince=function(t){var e,a={year:["year","years"],month:["month","months"],day:["day","days"],hour:["hour","hours"],minute:["minute","minutes"],justNow:["just now"]},n=Math.floor(((new Date).getTime()-new Date(t).getTime())/1e3);return(e=Math.floor(n/31536e3))>=1?{type:"year",value:e,text:e+" "+(1===e?a.year[0]:a.year[1])+" ago"}:(e=Math.floor(n/2592e3))>=1?{type:"month",value:e,text:e+" "+(1===e?a.month[0]:a.month[1])+" ago"}:(e=Math.floor(n/86400))>=1?{type:"day",value:e,text:e+" "+(1===e?a.day[0]:a.day[1])+" ago"}:(e=Math.floor(n/3600))>=1?{type:"hour",value:e,text:e+" "+(1===e?a.hour[0]:a.hour[1])+" ago"}:(e=Math.floor(n/60),e>1?{type:"minute",value:e,text:e+" "+(1===e?a.minute[0]:a.minute[1])+" ago"}:{type:"now",value:"",text:a.justNow[0]})},s.bulkDelete=function(t,e){s.each(t,function(t,a){delete e[a]})},s.bfaTrack=function(t,e){window.bfa&&window.bfa instanceof Function&&window.bfaBinder&&window.bfa(t,e)},s.getScreenOrientation=function(){if(screen.orientation&&screen.orientation.type)return screen.orientation.type.replace("-primary","");if(window.orientation)return 90===Math.abs(window.orientation)?"landscape":"portrait";if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return"portrait";if(window.matchMedia("(orientation: landscape)").matches)return"landscape"}return"landcspae"},s.isIOSIPad=function(){return!!navigator.userAgent.toLowerCase().match(/ipad/)}(),s.isIOSMobile=function(){return!!navigator.userAgent.toLowerCase().match(/iphone|ipod/)}();var u=e.isIOS=function(){return s.isIOSIPad||s.isIOSMobile}();s.isIOS=u,s.createScript=function(t){return new Promise(function(e,a){var n=document.createElement("script");n.onload=function(){return e(n)},n.onerror=function(t){(0,o.instrument)("script","error",{url:(0,i.default)(t,"currentTarget.src","").split("?")[0]}),a("Script failed to load")},n.src=t,n.async=!0,document.head.appendChild(n)})},s.stripHTML=function(t){var e=Array.isArray(t)?[]:{},a=document.createElement("div");switch(void 0===t?"undefined":r(t)){case"string":return a.innerHTML=t,a.textContent||"";case"object":return s.each(t,function(t,a){return e[t]=s.stripHTML(a)}),e}return t},e.default=s},225:function(t,e,a){"use strict";a(196);var n=a(32);(function(t){return t&&t.__esModule?t:{default:t}})(n).default.init().then(function(t){t.AppEvents.logPageView()})},23:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={platform:{desktop:1,mobileweb:2,bflite:3},bfaMode:{develop:1,prod:2,test:3},trackingBehavior:{byDefault:1,ifSpecified:2}};Object.freeze(n),e.default=n},28:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={get:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=t+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(a))return r.substring(a.length,r.length)}return e},set:function(t){var e=t.name,a=t.value,n=t.days,i=t.domain,r=void 0===i?".buzzfeed.com":i,o="";if(n){var s=new Date;s.setTime(s.getTime()+24*n*60*60*1e3),o="; expires="+s.toGMTString()}document.cookie=e+"="+a+o+"; path=/; domain="+r},remove:function(t){this.set({name:t,value:"",days:-1})}}},306:function(t,e,a){"use strict";var n=a(12),i=function(t){return t&&t.__esModule?t:{default:t}}(n);t.exports=function(t){var e=t.getOrCreateMap("track/page/view");e.addMapTo("fbEventName","PageView"),e.addMapTo("section").mapFrom("data.page.classification.section"),e.addMapTo("Edition").mapFrom("data.page.classification.edition"),e.addMapTo("username").mapFrom("data.page.post.author"),e.addMapTo("tag").mapFrom("data.page.post.tags"),e.addMapTo("SocialReferral",i.default.referrer);var a=t.getOrCreateRouter("track/click"),n=a.createConfigForRoute(function(t){return"Share"===t.n});n.addMapTo("platform","").mapFrom("d"),n.addMapTo("section").mapFrom("data.page.classification.section"),n.addMapTo("fbEventName","Share");var r=a.createConfigForRoute(function(t){return"Lead"===t.n});r.addMapTo("content_category","").mapFrom("data.page.post.author"),r.addMapTo("fbEventName","Lead"),t.getOrCreateRouter("track/quiz").createConfigForRoute(function(t){return"complete"===t.n}).addMapTo("fbEventName","CompletedQuiz")}},307:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=a(20),r=n(i),o=a(30),s=n(o),u=a(10),d=n(u),c=a(29),l=n(c),p=a(2),f=n(p);!function(){t.exports=function(t){function e(t){return t.data.source+"_"+t.data.id}t.addUtility("capitalize",function(t){return t.charAt(0).toUpperCase()+t.slice(1)}),t.addUtility("cleanLink",function(t){return t.replace("http://","").replace("https://","").replace("www.","")}),t.createMapTemplate("gaTemplate").addMapTo("category","").mapFrom(function(t){var e,a;return e=t.data.page.post?"Buzz":this.capitalize("index"===t.data.page.category?"Home":t.data.page.category),a=t.l&&"nowbuzzing"===t.l?"related-link":t.l,e+(a?":"+a.toLowerCase():"")});var a=t.createMapTemplate("shareTemplate");a.addMapTo("category","Share"),a.addMapTo("action","").mapFrom(function(t){return"Floating-Share"===t.l||"More-Share"===t.l?"click:floating-share-bar":"Top-Share"===t.l?"click:top-share-bar":"Bottom-Share"===t.l?"click:bottom-share-bar":"Subbuzz-Share"===t.l?"click:subbuzz":"quiz"===t.t&&"share"===t.n?"click:quiz-results":void 0}),a.addMapTo("label","").mapFrom("d",[t.formatters.strToLowerCase]);var n=t.createMapTemplate("quizEventTemplate");n.addMapTo("category","").mapFrom(function(t){return"share"===t.n?"Buzz:sharing-quiz":"Buzz:content"}),n.addMapTo("label","").mapFrom(function(t){return(0,l.default)(t,"data.quizId")&&(0,l.default)(t,"data.itemId")?(0,d.default)(t,"data.quizId")+"="+(0,d.default)(t,"data.itemId"):(0,d.default)(t,"data.current")+" out of "+(0,d.default)(t,"data.total")}),t.createMapTemplate("quizDimensionsTemplate").addMapTo("value","").mapFrom(function(t){return{dimension8:"quiz",dimension9:t.data.quizId}});var i=t.getOrCreateRouter("track/click"),o=i.createConfigForRoute(function(t){return-1!==t.n.indexOf("dfp")});o.applyTemplateByName("gaTemplate"),o.addMapTo("action","").mapFrom(function(t){var e=t.n.split("-");return"click:"+e[1].toLowerCase()+"/"+e[0].toLowerCase()}),o.addMapTo("label","").mapFrom(function(t){return t.d});var u=i.createConfigForRoute(function(t){return-1!==t.l.indexOf("Related-Link")});u.addMapTo("category","Buzz:related-link"),u.addMapTo("action","click:buzzing"),u.addMapTo("value","").mapFrom(function(t){return{position:(0,d.default)(t,"data.position"),dataSource:(0,d.default)(t,"data.dataSource"),module:(0,d.default)(t,"data.module")}});var c=i.createConfigForRoute(function(t){return-1!==t.l.indexOf("Related-Tag")});c.addMapTo("category","Buzz:related-link"),c.addMapTo("action","click:buzzing"),c.addMapTo("label","").mapFrom("n");var p=i.createConfigForRoute(function(t){return-1!==t.l.indexOf("Thumbstrip")});p.applyTemplateByName("gaTemplate"),p.addMapTo("action","").mapFrom("n"),p.addMapTo("position","").mapFrom("d");var h=i.createConfigForRoute(function(t){return"Share"===t.n&&"Subbuzz-Share"===t.l});h.applyTemplateByName("shareTemplate"),h.addMapTo("value","").mapFrom(function(t){return{dimension8:"sub_buzz",dimension9:t.data.subbuzzId}}),i.createConfigForRoute(function(t){return"Share"===t.n}).applyTemplateByName("shareTemplate");var g=i.createConfigForRoute(function(t){return"Contributions"===t.l});g.applyTemplateByName("gaTemplate"),g.addMapTo("action","").mapFrom(function(t){return"click:react/"+t.n},[t.formatters.strToLowerCase]);var m=i.createConfigForRoute(function(t){return"Reactions"===t.n});m.addMapTo("category","Reactions"),m.addMapTo("action","click:react"),m.addMapTo("label","").mapFrom("d");var v=i.createConfigForRoute(function(t){return"Badge"===t.n});v.applyTemplateByName("gaTemplate"),v.addMapTo("action","").mapFrom(function(t){return"click:"+t.d});var b=i.createConfigForRoute(function(t){return"NewsletterPromo"===t.l});b.addMapTo("category","NewsletterPromo"),b.addMapTo("action","").mapFrom(function(t){return"click:"+t.n});var y=i.createConfigForRoute(function(t){return"Quiz-Answer"===t.n&&"Poll"===t.d});y.applyTemplateByName("quizEventTemplate"),y.addMapTo("action","").mapFrom(function(t){return"click:"+t.n+(t.d?"/"+t.d:"")},[t.formatters.strToLowerCase]);var _=i.createConfigForRoute(function(t){return"Quiz-Answer"===t.n});_.applyTemplateByName("quizDimensionsTemplate"),_.applyTemplateByName("quizEventTemplate"),_.addMapTo("action","").mapFrom(function(t){return"click:"+t.n},[t.formatters.strToLowerCase]);var k=i.createConfigForRoute(function(t){return"Nav-Link"===t.n||"Exit-Link"===t.n});k.addMapTo("category","").mapFrom(function(t){return"Header"===t.l?t.l:"Article"}),k.addMapTo("action","click:link"),k.addMapTo("label","").mapFrom(function(t){return this.cleanLink(t.data.url)});var T=i.createConfigForRoute(function(t){return"games"===t.data.source});T.addMapTo("category","").mapFrom(function(t){return"Buzz:"+t.l}),T.addMapTo("action","").mapFrom(function(t){var e;return e=!!(0,s.default)(t.data.isClick)||((0,r.default)(t.data.isClick)?!!JSON.parse(t.data.isClick):!!t.data.isClick),e?"click:"+t.n:t.n}),T.addMapTo("label","(no label)").mapFrom("d"),T.addMapTo("value","").mapFrom("data.value");var w=t.getOrCreateRouter("track/page"),M=w.createConfigForRoute(function(t){return"Page-Exit"===t.n});M.applyTemplateByName("gaTemplate"),M.addMapTo("action","").mapFrom("n",[t.formatters.strToLowerCase]),M.addMapTo("label","").mapFrom(function(t){return t.data.scrolledDistance+"%"});var F=t.getOrCreateRouter("track/signup"),S=F.createConfigForRoute(function(t){return"NewsletterPromo"===t.l});S.addMapTo("action","").mapFrom("n"),S.addMapTo("category","").mapFrom("l"),S.addMapTo("label","").mapFrom(function(t){return t.d||"(no label)"});var C=i.createConfigForRoute(function(t){return"Subbuzz"===t.l});C.applyTemplateByName("gaTemplate"),C.addMapTo("action","").mapFrom("n"),C.addMapTo("label","").mapFrom("d"),C.addMapTo("category","").mapFrom("l");var I=t.getOrCreateMap("track/abtest");I.addMapTo("category","ABTestRegister"),I.addMapTo("action","").mapFrom(function(t){return"ab:"+t.n}),I.addMapTo("label",null).mapFrom(function(t){return t.n+":"+t.data.variation.value});var P=t.getOrCreateRouter("track/quiz"),x=P.createConfigForRoute(function(t){return"complete"===t.n});x.applyTemplateByName("quizEventTemplate"),x.applyTemplateByName("quizDimensionsTemplate"),x.addMapTo("action","click:quiz-complete");var E=P.createConfigForRoute(function(t){return"share"===t.n});E.applyTemplateByName("shareTemplate"),E.addMapTo("value","").mapFrom(function(t){var e;return e=(0,l.default)(t,"data.itemId")?(0,d.default)(t,"data.itemId"):(0,d.default)(t,"data.current")+" out of "+(0,d.default)(t,"data.total"),{dimension8:"quiz",dimension9:t.data.quizId,dimension10:e}});var O=P.createConfigForRoute(function(t){return"retake"===t.n});O.applyTemplateByName("quizEventTemplate"),O.addMapTo("action","click:quiz-retake");var z=i.createConfigForRoute(function(t){return"App-Promo"===t.n});z.applyTemplateByName("gaTemplate"),z.addMapTo("action","click:app_promo");var B=t.getOrCreateRouter("track/scroll"),R=B.createConfigForRoute(function(t){return"post"===t.n});R.addMapTo("category","Article"),R.addMapTo("action","scroll-depth"),R.addMapTo("label","").mapFrom(function(t){return t.d+"%"});var N=i.createConfigForRoute(function(t){return-1!==t.l.indexOf("Carousel")});N.applyTemplateByName("gaTemplate"),N.addMapTo("action","click:carousel"),N.addMapTo("value","").mapFrom(function(t){return{position:t.d,type:(0,d.default)(t,"data.type"),dataSource:(0,d.default)(t,"data.data_source")}});var A=i.createConfigForRoute(function(t){return"amazon-widget"===t.l});A.applyTemplateByName("gaTemplate"),A.addMapTo("action","").mapFrom("n"),A.addMapTo("label","").mapFrom("d"),A.addMapTo("category","").mapFrom("l");var D=i.createConfigForRoute(function(t){return-1!==t.l.indexOf("sidebar:")});D.applyTemplateByName("gaTemplate"),D.addMapTo("action","").mapFrom(function(t){var e="click:post";switch(t.n){case"post":break;default:e=t.n}return e}),D.addMapTo("label","").mapFrom(function(t){if(t.d)return t.d});var j=i.createConfigForRoute(function(t){return"Nav"===t.l});j.applyTemplateByName("gaTemplate"),j.addMapTo("action","").mapFrom(function(t){var e=t.n;return"vertical-more"===t.n&&(e="vertical/more"),"click:"+e}),j.addMapTo("label","").mapFrom(function(t){return t.d?t.d:""});var L=t.createMapTemplate("sponsoredQuizEventTemplate");L.addMapTo("buzz_id","").mapFrom("data.page.post.id"),L.addMapTo("category","SponsoredQuizQuestion");var q=t.getOrCreateRouter("track/click"),V=q.createConfigForRoute(function(t){return"Sponsored-Quiz-Answer"===t.n});V.applyTemplateByName("sponsoredQuizEventTemplate"),V.addMapTo("action","").mapFrom(function(t){return"click:"+t.n},[t.formatters.strToLowerCase]),V.addMapTo("label","").mapFrom("data.itemId"),V.addMapTo("value","").mapFrom(function(t){return{dimension8:"subbuzz",dimension9:(0,d.default)(t,"data.pollId")}});var H=t.getOrCreateRouter("track/scroll"),U=H.createConfigForRoute(function(t){return"Sponsored-Quiz-Impression"===t.n});U.applyTemplateByName("sponsoredQuizEventTemplate"),U.addMapTo("action","impression"),U.addMapTo("label","").mapFrom("data.pollId"),U.addMapTo("value","").mapFrom(function(t){return{dimension8:"subbuzz",dimension9:(0,d.default)(t,"data.pollId")}});var G={},Q={},W=t.getOrCreateRouter("track/video"),Z=t.createMapTemplate("videoClickTemplate");Z.addMapTo("category","Subbuzz"),Z.addMapTo("label").mapFrom(function(t){if("play"===t.n&&!G[e(t)])return t.data.url}),Z.addMapTo("action","").mapFrom(function(t){if("play"!==t.n)return"click:video-"+t.n;var a=e(t);return G[a]?"click:video-resume":(G[a]=!0,"click:video-play")}),t.createMapTemplate("videoDimensionTemplate").addMapTo("value","").mapFrom(function(t){var e={dimension5:f.default.getScreenOrientation()};return"embed"===(0,d.default)(t,"data.type")&&(e.dimension6=(0,d.default)(t,"data.url")),"native"===(0,d.default)(t,"data.type")&&(e.dimension3=(0,d.default)(t,"data.id"),e.dimension4=(0,d.default)(t,"data.title")),e});var Y=W.createConfigForRoute(function(t){return"play"===t.n||"pause"===t.n});Y.applyTemplateByName("videoClickTemplate"),Y.applyTemplateByName("videoDimensionTemplate");var K=W.createConfigForRoute(function(t){var a="finish"===t.n||"playback"===t.n,n=e(t);return!(!a||Q[n])&&(("finish"===t.n||"playback"===t.n&&"100%"===t.d)&&(Q[n]=!0),!0)});K.addMapTo("category","Subbuzz"),K.addMapTo("action","video:playback"),K.addMapTo("label","").mapFrom(function(t){return t.d||"100%"}),K.applyTemplateByName("videoDimensionTemplate");var J=i.createConfigForRoute(function(t){return"Nav-Product"===t.l});J.addMapTo("category","").mapFrom("n"),J.addMapTo("action","click:thumb"),J.addMapTo("label","").mapFrom("d");var X=i.createConfigForRoute(function(t){return"Subbuzz:stl"===t.l||"Subbuzz:stl-recap"===t.l});X.applyTemplateByName("gaTemplate"),X.addMapTo("action","").mapFrom("n"),X.addMapTo("label","").mapFrom(function(t){return""===t.d&&t.data&&t.data.url?t.data.url:t.d}),X.addMapTo("category","").mapFrom("l");var $=B.createConfigForRoute(function(t){return"Product-Lab-Promo"===t.l});$.addMapTo("action","impression"),$.addMapTo("category","Buzz:promo-unit").mapFrom(function(t){return"Buzz:"+t.n}),$.addMapTo("label","").mapFrom("d");var tt=i.createConfigForRoute(function(t){return"Product-Lab-Promo"===t.l});tt.addMapTo("action","").mapFrom(function(t){return"click:"+t.n}),tt.addMapTo("category","Buzz:promo-unit").mapFrom(function(t){return"Buzz:"+t.n}),tt.addMapTo("label","").mapFrom("d");var et=B.createConfigForRoute(function(t){return"TastyPromptImpression"===t.n});et.addMapTo("action","Impression"),et.addMapTo("category","TastyPrompt");var at=i.createConfigForRoute(function(t){return"TastyPrompt"===t.l});at.addMapTo("action","click:download"),at.addMapTo("category","TastyPrompt")}}()},308:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=a(29),r=n(i),o=a(10),s=n(o);!function(){function e(t){var e=(0,s.default)(t,"data.seedSocialFlags",null);if(e)return e.seed?"Seed":e.social?"Social":"Unknown"}function a(t,a){var n=(0,s.default)(t,"data.seedSocialFlags",null),i="";return n&&(i=n.sodisco?"SoDisco":"NonSoDisco"),i+e(t,a)}t.exports=function(t){var n=t.getOrCreateRouter("track/page/view"),i=n.createConfigForRoute(function(t){return"Buzz"===(0,s.default)(t,"data.page.type")});i.addMapTo("seg","").mapFrom(function(t){if((0,r.default)(t,"data.page.post.tags")){return(0,s.default)(t,"data.page.post.tags").filter(function(t){return null!==t&&void 0!==t&&""!==t}).map(function(t){return"tag:"+t})}}),i.addMapToArray("med","").mapFrom(function(t){return"section:"+(0,s.default)(t,"data.page.category")}).mapFrom(function(t){return"type:"+((0,s.default)(t,"data.page.post.isPromoted")?"sponsored":"editorial")}).mapFrom(function(t){var e="none";if(!0===(0,s.default)(t,"data.page.post.isPromoted")&&(0,r.default)(t,"data.page.post.tags")&&t.data.page.post.tags.indexOf("--content-theme")>-1)for(var a,n=/--content-theme-([^,]*),/g;null!==(a=n.exec(t.data.page.post.tags));)e+=a[1]+",";return"theme: "+e}),i.addMapToArray("comp","").mapFrom(function(t){return"username:"+(0,s.default)(t,"data.page.post.author")}),i.addMapToArray("adv","").mapFrom(function(t){var e=t.data.user.referrer;if(t.data.user.userAgent){var a=t.data.user.userAgent.toString().toLowerCase();!a.match(/fban\/messenger/)&&!a.match(/fban/)||e.match(/m\.facebook/)?a.match(/twitter/i)?e="Twitter":a.match(/pinterest/i)?e="Pinterest":(e=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0],e=e.split(":")[0]):e="Facebook"}return"socialreferral: "+e}).mapFrom(function(){return"platform: bzfd"}).mapFrom(function(t){return"edition: "+t.data.page.country}),i.addMapToArray("geo","").mapFrom(function(t){if((0,s.default)(t,"data.page.post.isPromoted")){return"sponsored: "+a(t,this.utils)}}).mapFrom(function(t){if((0,s.default)(t,"data.page.post.isPromoted")){return"sponsored - "+a(t,this.utils)+": buzzID-"+(0,s.default)(t,"data.page.post.id")}}).mapFrom(function(t){if((0,s.default)(t,"data.page.post.isPromoted"))return"sponsored: buzzID-"+(0,s.default)(t,"data.page.post.id")}),i.addMapToArray("int","").mapFrom(function(t){if(!(0,s.default)(t,"data.page.post.isPromoted")){return"editorial - "+e(t,this.utils)}}).mapFrom(function(t){if(!(0,s.default)(t,"data.page.post.isPromoted")){return"editorial - "+e(t,this.utils)+": buzzID-"+(0,s.default)(t,"data.page.post.id")}}).mapFrom(function(t){if(!(0,s.default)(t,"data.page.post.isPromoted"))return"editorial: buzzID-"+(0,s.default)(t,"data.page.post.id")}).mapFrom(function(t){if(!(0,s.default)(t,"data.page.post.isPromoted")){return"editorial - "+e(t,this.utils)+": section-"+(0,s.default)(t,"data.page.category")}}),i.addMapToArray("tpid","").mapFrom("data.poundId"),i.addMapTo("tp","BUZZ"),t.getOrCreateRouter("track/click").createConfigForRoute(function(t){return"Share"===t.n&&"More"!==t.d}).addMapToArray("act","").mapFrom(function(t){return"share: "+t.d}).mapFrom(function(t){return"share: "+t.d+" : section-"+(0,s.default)(t,"data.page.category")}).mapFrom(function(t){var a=(0,s.default)(t,"data.page.post.isPromoted")?"sponsored":"editorial",n=e(t,this.utils);return"share: "+t.d+" : "+a+"-"+n})}}()},309:function(t,e,a){"use strict";var n=a(10),i=function(t){return t&&t.__esModule?t:{default:t}}(n);!function(){t.exports=function(t){var e=t.getOrCreateMap("track/page/view");e.addMapTo("type","static"),e.addMapTo("assetid","").mapFrom(function(){return parseInt(Date.now()+1e10*Math.random(),10).toString(16)}),e.addMapTo("section","").mapFrom(function(t){return(0,i.default)(t,"data.page.category",null)},[t.formatters.strToLowerCase]),e.addMapTo("segA","").mapFrom(function(t){return(0,i.default)(t,"data.page.post.isPromoted")?"sponsored":"editorial"}),e.addMapTo("segB","bzfd"),e.addMapTo("segC","").mapFrom("data.page.country")}}()},310:function(t,e,a){"use strict";var n=a(521),i=function(t){return t&&t.__esModule?t:{default:t}}(n);!function(){t.exports=function(t){var e=t.getOrCreateMap("track/page/view");e.addMapTo("page_name","").mapFrom(function(t){return(0,i.default)(t.data.page.uri.cleanedPath,"/")},[t.formatters.strToLowerCase]),e.addMapTo("page_category","").mapFrom("data.page.category",[t.formatters.strToLowerCase])}}()},311:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=a(29),r=n(i),o=a(10),s=n(o),u=a(16),d=n(u),c=a(72),l=a(95),p=a(5),f=n(p);!function(){t.exports=function(t){function e(t){return-1!==t.n.indexOf("dfp")}function a(t){return"Sponsored-Quiz-Impression"===t.n}function n(t){return e(t)&&"nowbuzzing"===t.l}function i(t){return e(t)&&"Thumbstrip"===t.l}function o(t,e){t.addMapTo(e,"").mapFrom("data."+e)}var u=f.default.isXsmall()||f.default.isSmall()?"mobile":"desktop",p=d.default.getEdition();t.addUtility("capitalize",function(t){return t.charAt(0).toUpperCase()+t.slice(1)});var h=t.createMapTemplate("authorTemplate");h.addMapTo("author","").mapFrom("data.page.post.author"),h.addMapTo("author_id","").mapFrom("data.page.post.authorId");var g=t.createMapTemplate("commonFields");g.addMapTo("buzz_id","").mapFrom("data.page.post.id"),g.addMapTo("client_id","").mapFrom("data.poundId"),g.addMapTo("referrer","").mapFrom("data.user.referrer"),g.addMapTo("url","").mapFrom("data.page.uri.href");var m=t.createMapTemplate("pageFields");m.addMapTo("author","").mapFrom("data.page.post.author"),m.addMapTo("author_id","").mapFrom("data.page.post.authorId"),m.addMapTo("buzz","").mapFrom("data.page.post.uri"),m.addMapTo("page","Buzz"),m.addMapTo("post_category","").mapFrom("data.page.category"),m.addMapTo("v","bpager");var v=t.getOrCreateRouter("track/page/view"),b=v.createConfigForRoute(function(t){return(0,s.default)(t,"data.seedSocialFlags.sodisco",!1)});b.applyTemplateByName("commonFields"),b.applyTemplateByName("pageFields"),b.addMapTo("category","social_discovery"),b.addMapTo("client_country_code","").mapFrom("data.page.country"),b.addMapTo("type","pageview");var y=v.createDefaultConfig();y.applyTemplateByName("commonFields"),y.applyTemplateByName("pageFields"),y.addMapTo("client_country_code","").mapFrom("data.page.country"),y.addMapTo("type","pageview");var _=t.getOrCreateMap("track/page/exit");_.applyTemplateByName("commonFields"),_.applyTemplateByName("pageFields"),_.addMapTo("type","page_exit");var k=t.getOrCreateRouter("track/pound"),T=t.createMapTemplate("poundEventTemplate");T.addMapTo("buzz_id","").mapFrom("data.page.post.id"),T.addMapTo("r","").mapFrom("data.r"),T.addMapTo("type","").mapFrom("data.type"),T.addMapTo("v","bpager");var w=k.createConfigForRoute(function(t){return"user_edge"===t.n});w.applyTemplateByName("poundEventTemplate"),w.addMapTo("ad","").mapFrom("data.ad"),w.addMapTo("client_id","").mapFrom("data.client_id"),w.addMapTo("from_client_id","").mapFrom("data.from_client_id"),w.addMapTo("platform","").mapFrom("data.platform");var M=k.createConfigForRoute(function(t){return"share"===t.n});M.applyTemplateByName("poundEventTemplate"),M.addMapTo("channel","").mapFrom("data.channel"),M.addMapTo("pound_id","").mapFrom("data.pound_id");var F=t.getOrCreateMap("track/abtest");F.addMapTo("type","experiment_status"),F.addMapTo("experiment_name","").mapFrom("data.experiment"),F.addMapTo("experiment_id",null).mapFrom("data.variation.id"),F.addMapTo("experiment_version",null).mapFrom("data.variation.version"),F.addMapTo("variant_id",null).mapFrom("data.variation.variant_id"),F.addMapTo("variant_name",null).mapFrom("data.variation.value");var S=t.getOrCreateMap("track/abeagle/request");S.addMapTo("type","experiment_request"),S.addMapTo("response_time_ms").mapFrom("data.responseTime");var C=t.getOrCreateRouter("track/click"),I=t.createMapTemplate("shareEventTemplate");I.addMapTo("type","share"),I.addMapTo("share_activity_source","on_screen"),I.addMapTo("post_category","").mapFrom("data.page.category"),I.addMapTo("author","").mapFrom("data.page.post.author"),I.addMapTo("author_id","").mapFrom("data.page.post.authorId"),I.addMapTo("share_type","").mapFrom("d",[t.formatters.strToLowerCase]);var P=C.createConfigForRoute(function(t){var e=["Floating-Share","More-Share","Top-Share","Bottom-Share"];return"Share"===t.n&&-1!==e.indexOf(t.l)});P.applyTemplateByName("commonFields"),P.applyTemplateByName("shareEventTemplate"),P.addMapTo("share_button_location","").mapFrom(function(t){return"Floating-Share"===t.l||"More-Share"===t.l?"persistent_bar":"Top-Share"===t.l?"top_share_bar":"Bottom-Share"===t.l?"bottom_share_bar":void 0}),P.addMapTo("content_type",null),P.addMapTo("content_id",null),P.addMapTo("quiz_result",null);var x=C.createConfigForRoute(function(t){return"Share"===t.n&&"Subbuzz-Share"===t.l});x.applyTemplateByName("commonFields"),x.applyTemplateByName("shareEventTemplate"),x.addMapTo("content_type","sub_buzz"),x.addMapTo("share_button_location","sub_buzz"),x.addMapTo("content_id",null).mapFrom("data.subbuzzId"),x.addMapTo("quiz_result",null);var E=C.createConfigForRoute(function(t){return"Thumbstrip"===t.l&&!e(t)});E.applyTemplateByName("clickThumbstripMap"),E.addMapTo("url","").mapFrom(function(t){return"/post/"+t.data.page.post.author+"/"+t.data.page.post.uri}),E.addMapTo("page_url","").mapFrom(function(t){return"/post/"+t.data.page.post.author+"/"+t.data.page.post.uri}),E.applyTemplateByName("authorTemplate"),E.addMapTo("type","unit_click"),E.addMapTo("unit","thumbstrip"),E.addMapTo("mode","bpager"),E.addMapTo("page","bpage"),E.addMapTo("page_type","bpage"),E.addMapTo("buzz","").mapFrom(function(t){return t.data.page.post.uri}),E.addMapTo("buzz_id","").mapFrom(function(t){return t.data.page.post.id}),E.addMapTo("post_category","").mapFrom(function(t){return t.data.page.category}),E.addMapTo("position","").mapFrom(function(t){return t.d}),E.addMapTo("content_id","").mapFrom(function(t){return"buzz:"+t.opt.dimension2}),E.addMapTo("data_source","").mapFrom(function(t){return t.data.data_source}),E.addMapTo("sub_unit","").mapFrom(function(t){return t.data.sub_unit});var O=t.getOrCreateRouter("track/quiz"),z=t.createMapTemplate("quizEventTemplate");z.addMapTo("buzz_id","").mapFrom("data.page.post.id"),z.addMapTo("quiz_id","").mapFrom("data.quizId"),t.createMapTemplate("quizResultTemplate").addMapTo("quiz_result","").mapFrom(function(t){return(0,r.default)(t,"data.itemId")?(0,s.default)(t,"data.itemId"):(0,s.default)(t,"data.current")+" out of "+(0,s.default)(t,"data.total")});var B=O.createConfigForRoute(function(t){return"complete"===t.n});B.addMapTo("type","quiz_complete"),B.applyTemplateByName("quizResultTemplate"),B.applyTemplateByName("quizEventTemplate");var R=C.createConfigForRoute(function(t){return"Quiz-Answer"===t.n});R.applyTemplateByName("quizEventTemplate"),R.addMapTo("type","quiz_answer"),R.addMapTo("quiz_question_id","").mapFrom("data.questionId"),R.addMapTo("quiz_answer_id","").mapFrom("data.itemId");var N=O.createConfigForRoute(function(t){return"share"===t.n});N.applyTemplateByName("commonFields"),N.applyTemplateByName("shareEventTemplate"),N.applyTemplateByName("quizResultTemplate"),N.addMapTo("content_type","quiz"),N.addMapTo("share_button_location","quiz_result"),N.addMapTo("content_id",null).mapFrom("data.quizId");var A=t.createMapTemplate("feed-unit");A.addMapTo("content_id","").mapFrom(function(t){return"buzz:"+t.data.id}),A.addMapTo("mode",u),A.addMapTo("page_edition",p),A.addMapTo("page_type","bpage"),A.addMapTo("page_url","").mapFrom("data.page.uri.path"),A.addMapTo("position","").mapFrom("data.position"),A.addMapTo("post_category","").mapFrom("data.category"),A.addMapTo("data_source","").mapFrom("data.dataSource"),A.addMapTo("unit","nowbuzzing"),A.addMapTo("sub_unit","").mapFrom("data.sub_unit"),A.addMapTo("module","").mapFrom("data.module"),A.addMapTo("unit_client_id",""),A.addMapTo("variation_id","").mapFrom("data.variationId");var D=t.getOrCreateMap("track/scroll/post");D.applyTemplateByName("authorTemplate"),D.addMapTo("type","scroll_depth"),D.addMapTo("buzz_id","").mapFrom("data.page.post.id"),D.addMapTo("post_category","").mapFrom("data.page.category"),D.addMapTo("position","").mapFrom(function(t){return t.d+"%"});var j=t.getOrCreateRouter("track/scroll/impression"),L=j.createConfigForRoute(function(t){return!e(t)&&!a(t)});L.addMapTo("type","unit_impression"),L.applyTemplateByName("feed-unit");var q=C.createConfigForRoute(function(t){return-1!==t.l.indexOf("Related-Link")&&!e(t)});q.addMapTo("type","unit_click"),q.applyTemplateByName("feed-unit");var V=C.createConfigForRoute(function(t){return-1!==t.l.indexOf("Related-Tag")});V.addMapTo("type","unit_click"),V.applyTemplateByName("feed-unit");var H=C.createConfigForRoute(function(t){return"Carousel"===t.l});H.applyTemplateByName("clickCarouselMap"),H.applyTemplateByName("authorTemplate"),H.addMapTo("url","").mapFrom(function(t){return"/post/"+t.data.page.post.author+"/"+t.data.page.post.uri}),H.addMapTo("page_url","").mapFrom(function(t){return"/post/"+t.data.page.post.author+"/"+t.data.page.post.uri}),H.addMapTo("type","unit_click"),H.addMapTo("unit","carousel"),H.addMapTo("mode","bpager"),H.addMapTo("page","bpage"),H.addMapTo("page_type","bpage"),H.addMapTo("buzz","").mapFrom(function(t){return t.data.page.post.uri}),H.addMapTo("buzz_id","").mapFrom(function(t){return t.data.page.post.id}),H.addMapTo("post_category","").mapFrom(function(t){return t.data.page.category}),H.addMapTo("position","").mapFrom(function(t){return t.d}),H.addMapTo("content_id","").mapFrom(function(t){return"buzz:"+t.opt.dimension2});var U=t.createMapTemplate("ad-unit");U.addMapTo("content_id","").mapFrom(function(t){return t.data.obj_id?"buzz:"+t.data.obj_id:t.opt&&t.opt.dimension13?"creative:"+t.opt.dimension13:""}),U.addMapTo("mode",u),U.addMapTo("page_edition",p),U.addMapTo("page_type","bpage"),U.addMapTo("page_url","").mapFrom("data.page.uri.path"),U.addMapTo("position","").mapFrom(function(t){return t.data.p}),U.addMapTo("post_category","Advertiser"),U.addMapTo("unit","").mapFrom(function(t){return t.l}),U.addMapTo("variation_id","").mapFrom(function(t){return t.data.variation_id}),t.createMapTemplate("ad-sub_unit").addMapTo("sub_unit","ad"),t.createMapTemplate("ad-data_source").addMapTo("data_source","ad_api");var G=j.createConfigForRoute(i);G.addMapTo("type","unit_impression"),G.applyTemplateByName("ad-unit"),G.applyTemplateByName("ad-sub_unit"),G.applyTemplateByName("ad-data_source");var Q=C.createConfigForRoute(i);Q.addMapTo("type","unit_click"),Q.applyTemplateByName("ad-unit"),Q.applyTemplateByName("ad-sub_unit"),Q.applyTemplateByName("ad-data_source");var W=j.createConfigForRoute(n);W.addMapTo("type","unit_impression"),W.applyTemplateByName("ad-unit"),W.applyTemplateByName("ad-sub_unit"),W.applyTemplateByName("ad-data_source");var Z=j.createConfigForRoute(e);Z.addMapTo("type","unit_impression"),Z.applyTemplateByName("ad-unit");var Y=C.createConfigForRoute(n);Y.addMapTo("type","unit_click"),Y.applyTemplateByName("ad-unit"),Y.applyTemplateByName("ad-sub_unit"),Y.applyTemplateByName("ad-data_source");var K=C.createConfigForRoute(e);K.addMapTo("type","unit_click"),K.applyTemplateByName("ad-unit");var J=C.createConfigForRoute(function(t){return-1!==t.l.indexOf("sidebar:")});J.applyTemplateByName("rightRailConfig"),J.applyTemplateByName("authorTemplate"),J.addMapTo("url","").mapFrom(function(t){return"/post/"+t.data.page.post.author+"/"+t.data.page.post.uri}),J.addMapTo("page_url","").mapFrom(function(t){return"/post/"+t.data.page.post.author+"/"+t.data.page.post.uri}),J.addMapTo("type","unit_click"),J.addMapTo("unit","").mapFrom("l",[t.formatters.strToLowerCase]),J.addMapTo("mode","bpager"),J.addMapTo("page","bpage"),J.addMapTo("page_type","bpage"),J.addMapTo("buzz","").mapFrom(function(t){return t.data.page.post.uri}),J.addMapTo("buzz_id","").mapFrom(function(t){return t.data.page.post.id}),J.addMapTo("post_category","").mapFrom(function(t){return t.data.page.category}),J.addMapTo("position","").mapFrom(function(t){return t.d}),J.addMapTo("content_id","").mapFrom(function(t){return t.opt.dimension2?"buzz:"+t.opt.dimension2:""});var X=C.createConfigForRoute(function(t){return"Nav"===t.l});X.applyTemplateByName("commonFields"),X.applyTemplateByName("pageFields"),X.addMapTo("type","unit_click"),X.addMapTo("page_type","bpage"),X.addMapTo("unit","nav"),X.addMapTo("mode",u),X.addMapTo("link_url","").mapFrom("data.url");var $=t.createMapTemplate("sponsoredQuizEventTemplate");$.addMapTo("buzz_id","").mapFrom("data.page.post.id"),$.addMapTo("custom_ad_content_type","").mapFrom("data.contentType"),$.addMapTo("custom_ad_content_id","").mapFrom("data.pollId");var tt=t.getOrCreateRouter("track/click"),et=tt.createConfigForRoute(function(t){return"Sponsored-Quiz-Answer"===t.n});et.applyTemplateByName("sponsoredQuizEventTemplate"),et.addMapTo("type","custom_ad_content_click"),et.addMapTo("quiz_answer_id","").mapFrom("data.itemId");var at=j.createConfigForRoute(a);at.applyTemplateByName("sponsoredQuizEventTemplate"),at.addMapTo("type","custom_ad_content_impression");var nt=t.getOrCreateRouter("track/videoplayer"),it=nt.createDefaultConfig();it.addMapTo("page_edition",p),it.addMapTo("page_type","bpage"),it.addMapTo("platform","bpager"),["page_url","position","target","type","value","duration","audio_volume","source","video_id","transcoder_path","video_ts","video_type","video_title"].forEach(o.bind(null,it)),(0,c.map)(t),(0,l.performanceMap)(t),(0,l.customMarkMap)(t)}}()},312:function(t,e,a){"use strict";var n=a(10),i=function(t){return t&&t.__esModule?t:{default:t}}(n);!function(){t.exports=function(t){t.getOrCreateRouter("track/page/view").createConfigForRoute(function(t){return"Buzz"===(0,i.default)(t,"data.page.type")}).addMapTo("labels","").mapFrom(function(t){return(0,i.default)(t,"data.page.post.id")+".bzfd"})}}()},313:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(314),i=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default={Core:i.default}},314:function(t,e,a){"use strict";(function(t){function n(t){return t&&t.__esModule?t:{default:t}}function i(){this._modules={},this._plugins={},this._instances={},this._router=new x.default,this.inited=new O.default,this.active=new O.default,this.crashed=new O.default,this._inited=!1,this._active=!1,this._crashed=!1,this.crashed.add(function(){this._crashed=!0,this.log.error("CRASHED")},this,Number.MAX_VALUE),this._router.sub("bfa/subscribe/{action}/{eventName}",this._subscribe,this,{action:["add","addOnce","remove"],eventName:function(t){return(0,M.default)(t)&&t.length>0}}),this.inited.add(function(){this._inited=!0},this,Number.MAX_VALUE),this.active.add(function(){this._active=!0},this,Number.MAX_VALUE),this.Sandbox=function(t,e,a,n){return this.instanceId=e,this.moduleInited=new O.default,this.moduleActive=new O.default,this.fillModuleRoute=function(t){return"module/"+e+"/"+t},this.subOn=function(e,a,n){t._router.sub(e,a,n)},this.settings=a||{},this.moduleId=n,this.utils=t.utils,this.defs=t.defs,this},this.construct.dispatch(this)}Object.defineProperty(e,"__esModule",{value:!0});var r=a(501),o=n(r),s=a(495),u=n(s),d=a(19),c=n(d),l=a(30),p=n(l),f=a(10),h=n(f),g=a(7),m=n(g),v=a(29),b=n(v),y=a(40),_=n(y),k=a(63),T=n(k),w=a(20),M=n(w),F=a(33),S=n(F),C=a(23),I=n(C),P=a(317),x=n(P),E=a(31),O=n(E);i.prototype.log={error:function(t){window.console&&window.console.error("BFA [ BFACore ] "+t)},log:function(){},info:function(){},warn:function(){},enabled:function(){}},i.prototype.construct=new O.default,i.prototype.utils=S.default,i.prototype.defs=I.default,i.prototype._subscribe=function(t,e){return(0,T.default)(t)&&(0,T.default)(e)&&this[e.eventName]instanceof O.default&&(0,_.default)(t.fn)&&t.context&&this[e.eventName][e.action](t.fn,t.context),this},i.prototype.registerModule=function(t,e,a){if(!0===this._inited)return this.log.warn("You can't register module after activation"),this;e=e||{};var n=this.utils.checkType("function",t,"module")||this.utils.checkType("object",e,"settings");if(n)throw new TypeError(n);if(!(0,M.default)(a)&&(0,M.default)(t.defaultId)&&(a=t.defaultId),!(0,M.default)(a)||0===a.length)throw new TypeError("moduleId has to be specified (as third argument or as `id` property of module) and must be not empty string");return(0,b.default)(this._modules,a)?(this.log.warn("module "+a+" was already registered"),this):(this.push("module/"+a+"/added"),this._modules[a]={Creator:t,settings:e,id:a},this)},i.prototype.plugin=function(t,e,a){if(!0===this._inited)return this.log.warn("You can't add plugins after activation"),this;e=e||{};var n=this.utils.checkType("function",t,"plugin")||this.utils.checkType("object",e,"settings");if(n)throw new TypeError(n);if(!(0,M.default)(a)&&(0,M.default)(t.defaultId)&&(a=t.defaultId),!(0,M.default)(a)||0===a.length)throw new TypeError("pluginId has to be specified (as third argument or as `id` property of plugin) and must be not empty string");return(0,b.default)(this._plugins,a)?(this.log.warn("plugin "+a+" was already registered"),this):(this._plugins[a]={Creator:t,instance:null,settings:e,id:a},this)},i.prototype.activatePlugins=function(){function t(i,r){(0,m.default)(r)||(r=[]),r.push(i),a[i]=!0,(0,h.default)(n._plugins[i],"Creator.require",[]).forEach(function(e){if((0,p.default)(n._plugins[e]))throw new Error("Can't resolve \""+e+'" for "'+i+'" plugin');if(r.indexOf(e)>=0)throw new Error('Circular dependency "'+e+'" is required by "'+i+'" plugin: '+r.join(" -> "));a[e]||t(e,r.slice(0))},n),e.indexOf(i)<0&&e.push(i)}if(!0===this._crashed)return void this.log.error("Plugins activation interrupted");var e=[],a={},n=this;try{this.utils.forOwn(this._plugins,function(e){t(e.id)},this);for(var i=0;i<e.length;i++){var r=e[i];null===this._plugins[r].instance?(this._plugins[r].instance=new this._plugins[r].Creator(this,this._plugins[r].settings),this.push("plugin/"+r+"/added")):this.log.warn("Plugin "+r+" already added and activated")}}catch(t){return void 0===window.BZFD||"live"!==window.BZFD.Config.env&&"prod"!==window.BZFD.Config.env||!window.raven||raven.captureException(t),this.log.error(t),this.log.error("Plugins activation interrupted"),void this.crashed.dispatch()}},i.prototype.activate=function(){if(!0===this._inited)return void this.log.warn("Already initialized");if(this.activatePlugins(),!0===this._crashed)return void this.log.error("Activation interrupted");var e=this;this.utils.forOwn(this._modules,function(e){var a=e.Creator.defaultId,n=!1;(0,M.default)(e.settings.instanceId)&&(a=e.settings.instanceId);var i=new this.Sandbox(this,a,e.settings,e.Creator.defaultId);if((0,m.default)(e.Creator.require)&&e.Creator.require.length>0)for(var r=0;r<e.Creator.require.length;r++){var o=e.Creator.require[r];if(!(0,b.default)(this._plugins,o)||!(0,b.default)(this._plugins[o].instance,"modifySBInstance")){n="Module "+e.Creator.defaultId+" require plugin "+o;break}this._plugins[o].instance.modifySBInstance(i)}if(!n){var s=new e.Creator(i);(0,b.default)(s,"init")?(this._instances[a]={module:s,sandbox:i},this.push("module/"+a+"/added")):n="Constructor of module "+t.defaultId+" returned not valid object"}n&&(this.log.error(n),this.log.error("Instance "+a+" of module "+t.defaultId+" is not added properly"))},this);var a=(0,c.default)(this._instances).length,n=(0,u.default)(a,function(){e.inited.dispatch(e)}),i=(0,u.default)(a,function(){e.active.dispatch(e)});this.utils.forOwn(this._instances,function(t){t.sandbox.moduleInited.addOnce(n),t.sandbox.moduleActive.addOnce(i),(0,o.default)(t.module.init)},this)},i.prototype.push=function(){this._router.pub.apply(this._router,arguments)},e.default=i}).call(e,a(88)(t))},315:function(t,e,a){"use strict";function n(t){return t instanceof Error?t.stack||t.message:t.toString()}function i(t,e){return{logLevel:e||1,log:function(t,e){Array.isArray(e)||(e=[e]),!0===i._enabled&&window.console&&window.console[t].apply(window.console,e)},event:function(t,e,a){3===this.logLevel&&(this.log("groupCollapsed",t+" '"+e.t+"'"),this.log("log","EventInfo"),this.log("table",[[e]]),this.log("log","DataObject"),this.log("table",[[a]]),this.log("groupEnd"))},error:function(e){this.logLevel>=1&&this.log("error","BFA ["+t+"] "+n(e))},warn:function(e){this.logLevel>=2&&this.log("warn","BFA ["+t+"] "+n(e))}}}Object.defineProperty(e,"__esModule",{value:!0}),i._enabled=!1,i.enabled=function(t){return void 0!==t&&(i._enabled=!!t),i._enabled},e.default=i},316:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!1===(0,S.default)(t)||t.length<=0)throw new TypeError('"mapTo" should be a non empty string');(0,M.default)(e)&&(e=null),this.destinationVarPath=t,this.mappingType=this.mappingTypes.sourcePath,this.mappingFrom=void 0,this.preFormatters=[],this.defaultValue=e}function r(t){this.options=t,this.mapToCollection=[]}function o(t){r.call(this,t),this.templatesToApply=[]}function s(t,e){if(!t||!(0,T.default)(t))throw new Error("routeFunc should be a function that receives src object as parameter and returns bool");if(!(e&&e instanceof r))throw new Error("mapConfig should be an instance of BfaMapperMapConfig");this.routeFunc=t,this.mapConfig=e}function u(t,e){this.mapName=t,this.options=e,this.routers=[],this.defaultMapConfig=null}function d(){this.mapRouters={},this.mapTemplates={},this._utils={utils:E.default,defs:P.default}}function c(t,e){if(!1===(0,S.default)(t)||t.length<=0)throw new TypeError('"mapTo" should be a non empty string');(0,M.default)(e)&&(e=null),this.destinationVarPath=t,this.mappings=[],this.defaultValue=e}Object.defineProperty(e,"__esModule",{value:!0});var l=a(29),p=n(l),f=a(183),h=n(f),g=a(10),m=n(g),v=a(502),b=n(v),y=a(7),_=n(y),k=a(40),T=n(k),w=a(30),M=n(w),F=a(20),S=n(F),C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I=a(23),P=n(I),x=a(33),E=n(x);i.prototype.mappingTypes={sourcePath:1,function:2},i.prototype.mapFrom=function(t,e){if((0,T.default)(t))this.mappingType=this.mappingTypes.function,this.mappingFrom=t;else{if(!((0,S.default)(t)&&t.length>0))throw new TypeError('"mapFrom" is object of wrong type: '+(void 0===t?"undefined":C(t)).toString());this.mappingType=this.mappingTypes.sourcePath,this.mappingFrom=t}return(0,_.default)(e)&&(0,b.default)(e,function(t){return t instanceof Function})&&this.preFormatters.push.apply(this.preFormatters,e),this},i.prototype.map=function(t,e,a){var n=this.defaultValue;if(!(0,M.default)(this.mappingFrom))switch(this.mappingType){case this.mappingTypes.function:n=this.mappingFrom.call(a,t,e);break;case this.mappingTypes.sourcePath:n=(0,m.default)(t,this.mappingFrom,this.defaultValue)}return(0,M.default)(n)&&(n=this.defaultValue),this.preFormatters.length>0&&this.preFormatters.forEach(function(t){n=t.call(a,n)}),(0,h.default)(e,this.destinationVarPath,n),n},r.prototype.addMapTo=function(t,e){var a=new i(t,e);return this.mapToCollection.push(a),a},o.prototype=Object.create(r.prototype),o.prototype.constructor=o,o.prototype.applyTemplateByName=function(t){-1===this.templatesToApply.indexOf(t)&&this.templatesToApply.push(t)},u.prototype.getMapConfig=function(t,e){for(var a=null,n=0;n<this.routers.length;n++){var i=this.routers[n];if(!0===i.routeFunc.call(e,t)){a=i.mapConfig;break}}return null===a&&(a=this.defaultMapConfig),a},u.prototype.createConfigForRoute=function(t){var e=new s(t,new o(this.options));return this.routers.push(e),e.mapConfig},u.prototype.createDefaultConfig=function(){return this.defaultMapConfig=new o(this.options),this.defaultMapConfig},d.prototype.addUtility=function(t,e){if(!this.validateName(t))throw new TypeError("`utilityName` have to be not empty string");if((0,p.default)(this._utils,t))throw new Error("utility with "+t+" already exists");return this._utils[t]=e,this},d.prototype.getOrCreateMap=function(t,e){if(!this.validateName(t))throw new TypeError("mapName must be a not empty string");if(this.mapRouters[t])return this.mapRouters[t].defaultMapConfig;var a=new u(t,e);return this.mapRouters[t]=a,a.createDefaultConfig()},d.prototype.isExists=function(t){return(0,p.default)(this.mapRouters,t)},d.prototype.getOrCreateRouter=function(t,e){if(!this.validateName(t))throw new TypeError("`routeName` should be not empty string");if((0,p.default)(this.mapRouters,t))return this.mapRouters[t];var a=new u(t,e);return this.mapRouters[t]=a,a},d.prototype.createMapTemplate=function(t,e){if(!this.validateName(t))throw new TypeError("`templateName` should be not empty string");if((0,p.default)(this.mapTemplates[t]))return this.mapTemplates[t];var a=new r(e);return this.mapTemplates[t]=a,a},d.prototype.validateName=function(t){return!(!1===(0,S.default)(t)||t.length<=0)},d.prototype.map=function(t,e,a){var n=this;if(((0,M.default)(a)||null===a)&&(a={}),(0,M.default)(e)||null===e)return a;if(!(0,p.default)(this.mapRouters,t))return a;var i=this.mapRouters[t].getMapConfig(e,n._utils);if(null===i)return a;var r=i.mapToCollection;r.length>0&&r.forEach(function(t){t.map(e,a,n._utils)});var o=i.templatesToApply;return o.length>0&&o.forEach(function(t){if((0,p.default)(n.mapTemplates,t)){n.mapTemplates[t].mapToCollection.forEach(function(t){t.map(e,a,n._utils)})}}),a},d.prototype.formatters={strToLowerCase:function(t){return(0,S.default)(t)?t.toLowerCase():t},strCutTo255Characters:function(t){return(0,S.default)(t)&&t.length>255?t.substr(0,255):t},strToInt:function(t){try{return parseInt(t)}catch(e){return t}}},c.prototype.mappingTypes={sourcePath:1,function:2},c.prototype.mapFrom=function(t,e){var a={mappingFrom:t,preFormatters:[]};if((0,T.default)(t))a.mappingType=this.mappingTypes.function;else{if(!((0,S.default)(t)&&t.length>0))throw new TypeError('"mapFrom" is object of wrong type: '+(void 0===t?"undefined":C(t)).toString());a.mappingType=this.mappingTypes.sourcePath}return(0,_.default)(e)&&(0,b.default)(e,function(t){return t instanceof Function})&&a.preFormatters.push.apply(this.preFormatters,e),this.mappings.push(a),this},c.prototype.map=function(t,e,a){var n=this,i=(0,m.default)(e,this.destinationVarPath);if(i||(i=[]),!(0,_.default)(i))throw new TypeError('"Destination" is an object of wrong type: '+(void 0===i?"undefined":C(i)).toString()+". Array is expected");this.mappings.forEach(function(r){var o=n.defaultValue;if(!(0,M.default)(r.mappingFrom))switch(r.mappingType){case n.mappingTypes.function:o=r.mappingFrom.call(a,t,e);break;case n.mappingTypes.sourcePath:o=(0,m.default)(t,r.mappingFrom,n.defaultValue)}(0,M.default)(o)&&(o=n.defaultValue),r.preFormatters.length>0&&r.preFormatters.forEach(function(t){o=t.call(a,o)}),i.push(o)}),(0,h.default)(e,this.destinationVarPath,i)},r.prototype.addMapToArray=function(t,e){var a=new c(t,e);return this.mapToCollection.push(a),a},e.default=d},317:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(){this._router=T.default.create(),this._routes={},this._router.normalizeFn=T.default.NORM_AS_OBJECT,this._router.ignoreState=!0,this._router.greedy=!0,this._routes=[]}Object.defineProperty(e,"__esModule",{value:!0});var r=a(29),o=n(r),s=a(11),u=n(s),d=a(40),c=n(d),l=a(181),p=n(l),f=a(59),h=n(f),g=a(184),m=n(g),v=a(517),b=n(v),y=a(20),_=n(y),k=a(372),T=n(k);i.prototype.pub=function(t){if((0,_.default)(t)){var e,a=(0,b.default)(arguments,1);1===a.length?e=a[0]:a.length>1&&(e=a),this._router.parse(t,[e])}return this},i.prototype.modifySubCB=function(t,e,a){return(0,m.default)(t,"track/")?function(){e.apply(a,(0,h.default)(Array.prototype.slice.call(arguments)))}:e},i.prototype.sub=function(t,e,a,n,i){if(!(0,_.default)(t)||(0,p.default)(t))return this.log.error("`route` must be not empty string"),this;if(!(0,c.default)(e))return this.log.error("`cb` must be a function"),this;if(n&&!(0,u.default)(n))return this.log.error("`rules` must be an object or not specified"),this;var r=this.modifySubCB(t,e,a),s=i?"addOnce":"add";if((0,o.default)(this._routes,t)||n)if(n){var d=this._router.addRoute(t);d.rules=n,d.matched[s](r,a)}else this._routes[t].matched[s](r,a);else this._routes[t]=this._router.addRoute(t),this._routes[t].matched[s](r,a);return this},i.prototype.log={error:function(){},log:function(){},info:function(){},warn:function(){},enabled:function(){}},e.default=i},318:function(t,e,a){"use strict";function n(){this.domBinders=[],this.socialBinders=[],this.scrollBinders=[],this.generalBinders=[],this.videoBinders=[],this.parser=new r.default;var t;this.init=function(){for(t=0;t<this.domBinders.length;t++)this.domBinders[t].init();for(t=0;t<this.socialBinders.length;t++)this.socialBinders[t].init();for(t=0;t<this.scrollBinders.length;t++)this.scrollBinders[t].init();for(t=0;t<this.generalBinders.length;t++)this.generalBinders[t].init();for(t=0;t<this.videoBinders.length;t++)this.videoBinders[t].init()},this.trigger=function(t){switch(t.type){case"scroll":this.scrollBinders.forEach(function(t){"function"==typeof t.trigger&&t.trigger()})}}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(52),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=n},319:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(){}Object.defineProperty(e,"__esModule",{value:!0});var r=a(320),o=n(r),s=a(321),u=n(s),d=a(325),c=n(d),l=a(330),p=n(l),f=a(329),h=n(f),g=a(327),m=n(g),v=a(324),b=n(v),y=a(323),_=n(y),k=a(322),T=n(k),w=a(318),M=n(w);i.prototype.buildConfig={bfaFunctionName:null,domBinder:{delegatedMapping:null,directMapping:null},generalBinder:{pageExitBinder:!1},inViewImpressionBinder:{enabled:!1,locators:[]},scrollBinder:{pixelMode:{enabled:!1},elementMode:{enabled:!1,element:"",expected:0},checkpoints:[],bottomBounds:[]},socialBinder:{facebookMapping:null},videoBinder:{youtube:!1,vimeo:!1,facebook:!1}},i.prototype.useDomDelegatedBinder=function(t){return this.buildConfig.domBinder.delegatedMapping=t,this},i.prototype.useDomDirectBinder=function(t){return this.buildConfig.domBinder.directMapping=t,this},i.prototype.usePageExitBinder=function(){return this.buildConfig.generalBinder.pageExitBinder=!0,this},i.prototype.useInViewImpressionBinder=function(t){return this.buildConfig.inViewImpressionBinder.enabled=!0,this.buildConfig.inViewImpressionBinder.locators=t,this},i.prototype.useScrollPixelModeBinder=function(){return this.buildConfig.scrollBinder.pixelMode.enabled=!0,this},i.prototype.useScrollElementsModeBinder=function(t,e){return this.buildConfig.scrollBinder.elementMode.enabled=!0,this.buildConfig.scrollBinder.elementMode.element=t,this.buildConfig.scrollBinder.elementMode.expected=e,this},i.prototype.useSocialBinder=function(t){return this.buildConfig.socialBinder.mapping=t,this},i.prototype.setBottomBoundElements=function(t){return this.buildConfig.bottomBounds=t,this},i.prototype.setPercentageCheckpoints=function(t){this.scrollBinder.checkpoints=t},i.prototype.useBfaFunction=function(t){this.bfaFunctionName=t},i.prototype.useVideoBinder=function(){this.buildConfig.videoBinder.youtube=!0,this.buildConfig.videoBinder.vimeo=!0,this.buildConfig.videoBinder.facebook=!0},i.prototype.build=function(){if(!this.buildConfig.bfaFunctionName)return null;var t=new M.default;if(this.buildConfig.domBinder.delegatedMapping){var e=new o.default(this.buildConfig.domBinder.delegatedMapping,this.buildConfig.bfaFunctionName);t.domBinders.push(e)}if(this.buildConfig.domBinder.directMapping){var a=new u.default(this.buildConfig.domBinder.directMapping,this.buildConfig.bfaFunctionName);t.domBinders.push(a)}if(this.buildConfig.generalBinder.pageExitBinder){var n=new c.default(this.buildConfig.bfaFunctionName);t.generalBinders.push(n)}if(this.buildConfig.socialBinder.facebookMapping){var i=new p.default(this.buildConfig.socialBinder.facebookMapping,this.buildConfig.bfaFunctionName);t.socialBinders.push(i)}if(this.buildConfig.videoBinder.youtube){var r=new b.default(this.buildConfig.bfaFunctionName);t.videoBinders.push(r)}if(this.buildConfig.videoBinder.vimeo){var s=new _.default(this.buildConfig.bfaFunctionName);t.videoBinders.push(s)}if(this.buildConfig.videoBinder.facebook){var d=new T.default(this.buildConfig.bfaFunctionName);t.videoBinders.push(d)}if(this.buildConfig.scrollBinder.elementMode.enabled||this.buildConfig.scrollBinder.pixelMode.enabled){var l=new h.default(this.buildConfig.scrollBinder,this.buildConfig.bfaFunctionName);t.scrollBinders.push(l)}if(this.buildConfig.inViewImpressionBinder.enabled){var f=new m.default({locators:this.buildConfig.inViewImpressionBinder.locators},this.buildConfig.bfaFunctionName);t.scrollBinders.push(f)}return t.init(),t},e.default=i},32:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(){return{method:"share",app_id:h,href:d.default.addParams(f.default.getUrl(),[["ref","mobile_share"]]),caption:f.default.getCaption(),description:f.default.getDescription("facebook"),name:f.default.getTitle("facebook"),picture:f.default.getPicture("facebook"),ref:"mobile_share",iframe_test:!0}}function r(){return v||(v=new Promise(function(t,e){window.fbAsyncInit=function(){m=window.FB,m.init({version:g,appId:h,status:!0,cookie:!0,xfbml:!0}),t(m)},d.default.createScript("//connect.facebook.net/en_US/sdk.js").catch(e)})),v}Object.defineProperty(e,"__esModule",{value:!0});var o=a(1),s=n(o),u=a(2),d=n(u),c=a(12),l=n(c),p=a(15),f=n(p),h=BZFD.Config.facebookApi.appId,g=BZFD.Config.facebookApi.version,m=void 0,v=void 0;e.default={parse:function(t){return r().then(function(e){return e.XFBML.parse(t)})},subscribe:function(t,e){return r().then(function(a){return a.Event.subscribe(t,e)})},unsubscribe:function(t,e){return r().then(function(a){return a.Event.unsubscribe(t,e)})},ui:function(t,e){"function"!=typeof e&&(e=function(){}),FB.ui(t,e)},openFeedDialog:function(t){var e=d.default.stripHTML(d.default.extend({},i(),{href:t.fbUrl,picture:t.media,quote:t.text},t));if(e.app_id=h,t.redirect_uri=t.redirectUri||t.url,delete e.media,window.FB){this.ui(e);var a=s.default.findOne(document,"#fb_dialog_loader_close");a&&s.default.one(a,"click",function(t){return t.preventDefault()})}else d.default.openPopup(d.default.prepareUrl("https://www.facebook.com/dialog/"+e.method+"/?",e))},share:function(t,e){"android"===l.default.os&&(t.display="popup",t.iframe_test=!1),delete t.title,e&&e.preventDefault(),this.openFeedDialog(t,e)},init:r}},320:function(t,e,a){"use strict";function n(t,e){this.events=[],this.matches=document.documentElement.matches||document.documentElement.webkitMatchesSelector||document.documentElement.mozMatchesSelector||document.documentElement.oMatchesSelector||document.documentElement.msMatchesSelector,this.init=function(){this.processMapping(),this.subscribeForEvents()},this.processMapping=function(){for(var e in t)if(t.hasOwnProperty(e))for(var a=t[e],n=0;n<a.length;n++)a[n].trackMethod=e,this.events.push(a[n])},this.subscribeForEvents=function(){var t=document.body||document.documentElement,e=this;this.events=this.events.map(function(a){return a.handler=e.getHandler(),t.addEventListener(a.event,a.handler),a})},this.getHandler=function(){var t=this;return function(e){if(!e.bfaHandled&&e.target)for(var a=e.target;a;){for(var n=0;n<t.events.length;n++){var i=t.events[n];if(a.nodeType&&9!==a.nodeType&&i.event===e.type&&t.matches.call(a,i.selector)){var r=i.options?i.options.handlers:null;t.trackElement(a,i.trackMethod,r),e.bfaHandled=!0;break}}if(e.bfaHandled)break;a=a.parentNode}}},this.trackElement=function(t,a,n){if(n)for(var i=0;i<n.length&&!r.default[n[i]](t,e,a);i++);else{(0,r.default.DefaultHandler)(t,e,a)}},this.disable=function(){for(var t=document.body||document.documentElement,e=0;e<this.events.length;e++)t.removeEventListener(this.events[e].event,this.events[e].handler)}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(127),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=n},321:function(t,e,a){"use strict";function n(t,e){this.events=[],this.init=function(){this.processMapping(),this.subscribeForEvents()},this.processMapping=function(){for(var e in t)if(t.hasOwnProperty(e))for(var a=t[e],n=0;n<a.length;n++)a[n].trackMethod=e,this.events.push(a[n])},this.subscribeForEvents=function(){var t=this;this.events=this.events.map(function(e){var a=document.querySelector(e.selector);if(a){var n=e.options?e.options.handlers:null;e.handler=t.getHandler(e.trackMethod,n),a.addEventListener(e.event,e.handler)}return e})},this.getHandler=function(t,e){var a=this;return function(n){a.trackElement(this,t,e),n.bfaHandled=!0}},this.trackElement=function(t,a,n){if(n)for(var i=0;i<n.length&&!r.default[n[i]](t,e,a);i++);else{(0,r.default.DefaultHandler)(t,e,a)}},this.disable=function(){for(var t=0;t<this.events.length;t++){var e=document.querySelector(this.events[t].selector);e&&e.removeEventListener(this.events[t].event,this.events[t].handler)}}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(127),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=n},322:function(t,e,a){"use strict";function n(t){var e=this;this.initCounter=0,this.init=function(){if(window.FB)return void window.FB.Event.subscribe("xfbml.ready",function(t){"video"===t.type&&e.processVideo(t)});this.initCounter<10&&(this.initCounter++,setTimeout(function(){e.init()},500))},this.processVideo=function(e){var a=document.getElementById(e.id),n=e.instance,i={id:e.id,published:a.getAttribute("data-published"),url:a.getAttribute("data-video-url"),source:"facebook",type:"embed"};n.subscribe("startedPlaying",function(){i.duration=e.instance.getDuration(),i.currentTime=e.instance.getCurrentPosition(),window[t].apply(this,["track/video/play",{data:i}])}),n.subscribe("paused",function(){i.duration=e.instance.getDuration(),i.currentTime=e.instance.getCurrentPosition(),window[t].apply(this,["track/video/pause",{data:i}])}),n.subscribe("finishedPlaying",function(){i.duration=e.instance.getDuration(),i.currentTime=e.instance.getCurrentPosition(),window[t].apply(this,["track/video/finish",{data:i}])}),n.subscribe("startedBuffering",function(){i.duration=e.instance.getDuration(),i.currentTime=e.instance.getCurrentPosition(),window[t].apply(this,["track/video/startedBuffering",{data:i}])}),n.subscribe("finishedBuffering",function(){i.duration=e.instance.getDuration(),i.currentTime=e.instance.getCurrentPosition(),window[t].apply(this,["track/video/finishedBuffering",{data:i}])}),n.subscribe("error",function(){window[t].apply(this,["track/video/error",{data:i}])})}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},323:function(t,e,a){"use strict";function n(t){function e(t){/^https?:\/\/player.vimeo.com/.test(t.origin)&&a.processVideo(t)}this.inited=!1;var a=this;window.addEventListener?window.addEventListener("message",e,!1):window.attachEvent("onmessage",e,!1),this.init=function(){this.inited=!0},this.processVideo=function(e){var n=JSON.parse(e.data);if("ready"===n.event&&this.registerListeners(n.player_id),this.inited)switch(n.event){case"play":window[t].apply(this,["track/video/play",{data:a.getVideoData(n)}]);break;case"pause":window[t].apply(this,["track/video/pause",{data:a.getVideoData(n)}]);break;case"finish":window[t].apply(this,["track/video/finish",{data:a.getVideoData(n)}])}},this.registerListeners=function(t){var e=document.getElementById(t);e.contentWindow.postMessage(JSON.stringify({method:"addEventListener",value:"play"}),"*"),e.contentWindow.postMessage(JSON.stringify({method:"addEventListener",value:"pause"}),"*"),e.contentWindow.postMessage(JSON.stringify({method:"addEventListener",value:"finish"}),"*")},this.getVideoData=function(t){var e=document.getElementById(t.player_id);return{id:t.player_id,duration:t.data.duration,currentTime:t.data.seconds,published:e.getAttribute("data-published")||e.parentElement.getAttribute("data-published"),url:e.getAttribute("src"),source:"vimeo"}}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},324:function(t,e,a){"use strict";function n(t){this.inited=!1;var e=this;window.bfaYoutubeIframePlayerTracking||(window.bfaYoutubeIframePlayerTracking=function(t){e.processVideo(t)}),this.init=function(){this.inited=!0},this.processVideo=function(a){var n=a.getIframe(),i=n.getAttribute("id"),r=n.getAttribute("data-published"),o=n.getAttribute("src");a.addEventListener("onStateChange",function(a){if(e.inited){var n={id:i,duration:a.target.getDuration(),currentTime:a.target.getCurrentTime(),published:r,url:a.target.getVideoUrl(),source:"youtube",type:"embed"};switch(a.data){case 1:window[t].apply(this,["track/video/play",{data:n}]);break;case 2:window[t].apply(this,["track/video/pause",{data:n}]);break;case 0:window[t].apply(this,["track/video/finish",{data:n}]);break;case 3:window[t].apply(this,["track/video/startedBuffering",{data:n}])}}}),a.addEventListener("onError",function(a){if(e.inited){var n={id:i,published:r,url:o,source:"youtube",errorCode:a.data};window[t].apply(this,["track/video/error",{data:n}])}})}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},325:function(t,e,a){"use strict";function n(t){this.visibilityProps={hidden:null,visibilityChange:null},this.trackedByVisibility=!1,this.trackedByUnload=!1;var e=this;this.init=function(){this.visibilityProps=this.getVisibilityProps(),this.visibilityProps.hidden&&this.visibilityProps.visibilityChange&&document.addEventListener(this.visibilityProps.visibilityChange,this.visibilityHandler,!1),window.addEventListener("beforeunload",this.unloadHandler,!1),window.addEventListener("unload",this.unloadHandler,!1),window.addEventListener("pagehide",this.unloadHandler,!1)},this.visibilityHandler=function(){document[e.visibilityProps.hidden]||e.trackedByVisibility||(e.trackedByVisibility=!0,window[t].apply(this,["track/page/exit"]))},this.unloadHandler=function(){e.trackedByUnload||(e.trackedByUnload=!0,window[t].apply(this,["track/page/exit"]))},this.getVisibilityProps=function(){var t=null,e=null;return void 0!==document.hidden?(t="hidden",e="visibilitychange"):void 0!==document.mozHidden?(t="mozHidden",e="mozvisibilitychange"):void 0!==document.msHidden?(t="msHidden",e="msvisibilitychange"):void 0!==document.webkitHidden&&(t="webkitHidden",e="webkitvisibilitychange"),{hidden:t,visibilityChange:e}}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},326:function(t,e,a){"use strict";function n(t,e){this.options=t||{},this.executable=e,this.points=[],this.init=function(){this.fillCheckPoints()},this.track=function(){if(this.options.elementMode.element&&this.options.elementMode.expected){var t,e=window.pageYOffset+document.documentElement.clientHeight+1,a=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.clientTop||document.body.clientTop||0,i=document.querySelectorAll(this.options.elementMode.element),r=0;for(t=0;t<i.length;t++){i[t].getBoundingClientRect().top+a-n<=e&&r++}var o=r/this.options.elementMode.expected*100,s=null;for(t=0;t<this.options.bottomBounds.length&&!(s=document.querySelector(this.options.bottomBounds[t]));t++);if(s){e>=s.getBoundingClientRect().top+a-n&&o<100&&(o=100)}for(t=0;t<this.options.checkpoints.length;t++)if(this.points[t].percentage<=o&&!this.points[t].passed){this.points[t].passed=!0;var u=["track/scroll/post",{t:"scroll",n:"post",d:this.points[t].percentage.toString()}];this.executable&&window[this.executable]instanceof Function&&window[this.executable].apply(this,u)}}},this.fillCheckPoints=function(){for(var t=0;t<this.options.checkpoints.length;t++)this.points.push({percentage:this.options.checkpoints[t],passed:!1})}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},327:function(t,e,a){"use strict";function n(t,e){this.options=t||{},this.executable=e,this.parser=new r.default,this.init=function(){window&&t&&e&&(this.trigger=this.getHandler(),this.trigger(),window.addEventListener("scroll",this.debounce(this.trigger,200)),document.addEventListener("keydown",this.debounce(this.getKeyPressHandler(),200)))},this.getKeyPressHandler=function(){var t=this,e=this.getHandler();return function(a){if(!(32===a.which||33===a.which||34===a.which||38===a.which||40===a.which||a.ctrlKey&&35===a.which||a.ctrlKey&&36===a.which&&t.scrollHandler))return null;e()}},this.getHandler=function(){function e(t){var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,a=document.documentElement.clientHeight+1,n=e+a,i=t.getBoundingClientRect(),r=i.top+e;return r+i.height<=n&&r>=e}var a=this;return function(){if(a.options.locators){for(var n,i=[],r=0;r<a.options.locators.length;r++){var o=document.querySelectorAll(t.locators[r]);for(n=0;n<o.length;n++)if(o[n].hasAttribute("data-bfa")&&(!o[n].hasAttribute("bfa-impression-tracked")||"false"===o[n].getAttribute("bfa-impression-tracked"))&&e(o[n])){var s=a.parser.parse(o[n]),u={t:"scroll",n:s.action,l:s.location,d:s.description,data:s.data,opt:s.options};i.push(u),o[n].setAttribute("bfa-impression-tracked",!0)}}if(a.executable&&window[a.executable]instanceof Function)for(n=0;n<i.length;n++){var d=["track/scroll/impression",i[n]];window[a.executable].apply(this,d)}}}},this.debounce=function(t,e,a){var n;return function(){function i(){n=null,a||t.apply(r,o)}var r=this,o=arguments,s=a&&!n;clearTimeout(n),n=setTimeout(i,e),s&&t.apply(r,o)}}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(52),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=n},328:function(t,e,a){"use strict";function n(t,e){this.options=t||{},this.executable=e,this.points=[],this.init=function(){this.fillCheckPoints()},this.track=function(){var t,e,a=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.clientHeight+1,i=document.documentElement.clientTop||document.body.clientTop||0,r=a+n,o=0;for(t=0;t<this.options.bottomBounds.length&&!(e=document.querySelector(this.options.bottomBounds[t]));t++);if(e){var s=e.getBoundingClientRect().top+a-i;r>=s&&o<100&&(o=100),r<=s&&(o=r/s*100)}for(t=0;t<this.options.checkpoints.length;t++)if(this.points[t].percentage<=o&&!this.points[t].passed){this.points[t].passed=!0;var u=["track/scroll/post",{t:"scroll",n:"post",d:this.points[t].percentage.toString()}];this.executable&&window[this.executable]instanceof Function&&window[this.executable].apply(this,u)}},this.fillCheckPoints=function(){for(var t=0;t<this.options.checkpoints.length;t++)this.points.push({percentage:this.options.checkpoints[t],passed:!1})}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},329:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){this.options=t||{},this.executable=e,this.scrollHandler=null,this.keyPressHandler=null,this.init=function(){window&&t&&e&&(this.scrollHandler=this.getScrollHandler(),this.keyPressHandler=this.getKeyPressScrollHandler(),this.scrollHandler&&window.addEventListener("scroll",this.debounce(this.scrollHandler,200)),this.keyPressHandler&&document.addEventListener("keydown",this.debounce(this.keyPressHandler,200)))},this.getScrollHandler=function(){var e=null,a=null;return this.options.pixelMode.enabled&&(e=new o.default(this.options,this.executable),e.init()),this.options.elementMode.enabled&&(a=new u.default(this.options,this.executable),a.init()),function(){if(t.elementMode.enabled){document.querySelectorAll(t.elementMode.element).length!==t.elementMode.expected?a.track():t.pixelMode.enabled&&e.track()}else t.pixelMode.enabled&&e.track()}},this.getKeyPressScrollHandler=function(){var t=this;return function(e){if(!(32===e.which||33===e.which||34===e.which||38===e.which||40===e.which||e.ctrlKey&&35===e.which||e.ctrlKey&&36===e.which&&t.scrollHandler))return null;t.scrollHandler()}},this.debounce=function(t,e,a){var n;return function(){function i(){n=null,a||t.apply(r,o)}var r=this,o=arguments,s=a&&!n;clearTimeout(n),n=setTimeout(i,e),s&&t.apply(r,o)}}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(328),o=n(r),s=a(326),u=n(s);e.default=i},33:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(505),r=n(i),o=a(504),s=n(o),u=a(26),d=n(u),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default={forOwn:function(t,e,a){s.default.apply(this,[t,(0,d.default)(e,a)])},queryStringToObject:function(t){return t?(-1!==t.indexOf("?")&&(t=t.split("?")[1]),(0,r.default)(t.split("&").map(function(t){return t.split("=").map(decodeURIComponent)}))):{}},readCookie:function(t){for(var e,a=document.cookie.split(";"),n=[],i=0;i<a.length;i++){if(a[i]=a[i].trim(),"object"===(void 0===t?"undefined":c(t))&&t.exec){if(new RegExp(t).test(a[i])){e=/(.*)=(.*)$/g.exec(a[i]),e&&n.push({name:e[1],value:e[2]})}}if("string"==typeof t){var r=RegExp("^\\s*"+t+"=\\s*(.*?)\\s*$");e=a[i].match(r),e&&n.push({name:t,value:e[1]})}}return n},checkType:function(t,e,a,n){return(void 0===e?"undefined":c(e))!==t?a+" has to be a "+t:!0===n&&isEmpty(e)?a+" has to be not empty":void 0},getAppReferrer:function(t,e){var a=t&&t.match(/fban(\/messenger)?|twitter|pinterest/i);if(a)switch(a[0].toLowerCase()){case"fban/messenger":return"http://msgr.facebook.com";case"fban":if(e&&-1===e.indexOf("m.facebook"))return"http://app.facebook.com";break;default:return"http://app."+a[0].toLowerCase()+".com"}return""}}},330:function(t,e,a){"use strict";function n(t,e){this.mapping=t,this.executable=e,this.parser=new r.default,this.init=function(){var t=this,e=0,a=setInterval(function(){e>=10&&clearInterval(a),window.FB&&(clearInterval(a),t.processMappings()),e++},1e3)},this.processMappings=function(){if(void 0!==t)for(var e=0;e<t.length;e++)"like"===t[e]&&this.bindLikes(),"unlike"===t[e]&&this.bindDislikes(),"comment"===t[e]&&this.bindComments()},this.bindLikes=function(){var t=this;window.FB.Event.subscribe("edge.create",function(e,a){if(null!==a&&a.getAttribute){var n=t.parser.parse(a),i=["track/click/"+n.action,{t:"click",n:n.action,d:n.description,l:n.location,data:n.data,opt:n.options}];t.executable&&window[t.executable]instanceof Function&&window[t.executable].apply(this,i)}})},this.bindDislikes=function(){var t=this;window.FB.Event.subscribe("edge.remove",function(e,a){var n=t.parser.parse(a),i=["track/click/"+n.action,{t:"click",n:n.action,d:n.description,l:n.location,data:n.data,opt:n.options}];t.executable&&window[t.executable]instanceof Function&&window[t.executable].apply(this,i)})},this.bindComments=function(){var t=this;window.FB.Event.subscribe("comment.create",function(){var e=["track/click/Submit",{t:"click",n:"Submit",d:"Facebook",l:"Contributions"}];t.executable&&window[t.executable]instanceof Function&&window[t.executable].apply(this,e)})}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(52),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=n},331:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){var e={trackingBehavior:c.default.trackingBehavior.byDefault,extTrackerGlobalName:"COMSCORE",extFilesPaths:[("https:"===document.location.protocol?"https://sb":"http://b")+".scorecardresearch.com/beacon.js"]},a={c1:2,c2:6768151,c3:"buzzfeed.com",c4:"",c5:"",c6:"",c15:""};this._inited=!1,this._active=!1,this.settings=(0,o.default)(t.settings||{},e),this.generalSettings=t.getGeneralSettings();var n=this;this.activate=function(){if(!n._active&&n._inited){if(!n.tracker&&n.generalSettings.mode===c.default.bfaMode.prod){if(!window[n.settings.extTrackerGlobalName])return;n.tracker=window[n.settings.extTrackerGlobalName]}n._active=!0,t.moduleActive.dispatch()}},t.onGeneralSettingsChange(function(){this.generalSettings=t.getGeneralSettings()},this),this._trackPage=function(e){if(!this._active)return void t.moduleActive.addOnce((0,u.default)(this._trackPage,this,e),this);n.generalSettings.mode===c.default.bfaMode.prod?this.tracker.beacon(a):t.debugTracker.trackEvent(t.tryConvertToEventInfo(e,"page","view"),a)},t.subOn("track/page/view",this._trackPage,this),this.init=function(){n.generalSettings.mode===c.default.bfaMode.prod&&!n.tracker&&!window[n.settings.extTrackerGlobalName]&&n.settings.extFilesPaths&&n.settings.extFilesPaths.length>0&&n.settings.extFilesPaths.forEach(function(e){t.domi.loadScript({src:e},n.activate,null,n)}),n._inited=!0,t.moduleInited.dispatch(),n.activate()}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(14),o=n(r),s=a(26),u=n(s),d=a(23),c=n(d);i.defaultId="ComscoreIntegration",i.require=["logger","domi","generalSettings","debugTracker","trackingUtils"],e.default=i},332:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){var e={trackingBehavior:m.default.trackingBehavior.byDefault,extTrackerGlobalName:"fbq",tracker:null,configMapsDelegate:null,extFilesPaths:[],facebookId:"260954170738952"};this._inited=!1,this._active=!1,this.settings=(0,c.default)(t.settings||{},e),this.generalSettings=t.getGeneralSettings();var a=this,n=["ViewContent","Search","Lead","AddToCart","AddToWishlist","InitiateCheckout","AddPaymentInfo","Purchase","CompleteRegistration"];this.activate=function(){if(!a._active&&a._inited){if(!this.tracker&&this.generalSettings.mode===m.default.bfaMode.prod){if(!window[this.settings.extTrackerGlobalName])return;this.tracker=window[this.settings.extTrackerGlobalName],this.tracker("init",this.settings.facebookId)}this.page&&a.user&&(this._active=!0,t.moduleActive.dispatch())}},t.onGeneralSettingsChange(function(){a.generalSettings=t.getGeneralSettings()},this),t.onPageReady(function(){a.page=t.getPageInfo(),a.activate()},this),t.onUserReady(function(){a.user=t.getUserInfo(),a.activate()},this),this.getEventInfo=function(e,a,n){var i=t.tryConvertToEventInfo(e,a,n);return t.canTrackEvent(t.moduleId,this.settings.trackingBehavior,i)?(i.data.page=this.page,i.data.user=this.user,i):(t.log.warn(t.moduleId+" cannot track current event. Type: "+a+"; Name: "+n+";"),null)},this._trackDefault=function(e,a){if(e&&null!==a&&(0,h.default)(a).length>0){var i="";switch("fbEventName"in a&&(i=a.fbEventName,delete a.fbEventName),this.generalSettings.mode){case m.default.bfaMode.prod:(0,u.default)(n,i)?this.tracker("track",i,a):this.tracker("trackCustom",i,a);break;default:t.debugTracker.trackEvent(e,a)}}},this._trackPage=function(e){if(!this._active)return void t.moduleActive.addOnce((0,p.default)(this._trackPage,this,e),this);var a=this.getEventInfo(e,"page","view");if(!t.mapper.isExists("track/page/view"))return void t.log.warn("Mapping for `track/page/view` doesn't exist");var n=t.mapper.map("track/page/view",a,{});this._trackDefault(a,n)},t.subOn("track/page/view",this._trackPage,this),this._trackClick=function(e,a){if(!this._active)return void t.moduleActive.addOnce((0,p.default)(this._trackClick,this,e,a),this);var n,i,r=this.getEventInfo(e,"click",a.eventName);if(r){if(!t.mapper.isExists("track/click"))return void t.log.warn("Mapping for `track/click` doesn't exist");var s=t.mapper.map("track/click",r,{});this._trackDefault(r,s),(0,o.default)(this.page,"post.flags.ad",!1)&&"Share"===r.n&&(n=(0,c.default)({n:"Lead"},r),i=t.mapper.map("track/click",n,{}),this._trackDefault(n,i))}},t.subOn("track/click/{eventName}",this._trackClick,this),this._trackQuiz=function(e,a){if(!this._active)return void t.moduleActive.addOnce((0,p.default)(this._trackQuiz,this,e,a),this);var n=this.getEventInfo(e,"quiz",a.eventName);if(!t.mapper.isExists("track/quiz"))return void t.log.warn("Mapping for `track/quiz` doesn't exist");var i=t.mapper.map("track/quiz",n,{});this._trackDefault(n,i)},t.subOn("track/quiz/{eventName}",this._trackQuiz,this),this._trackVideo=function(e,a){if(!this._active)return void t.moduleActive.addOnce((0,p.default)(this._trackVideo,this,e,a),this);var n=this.getEventInfo(e,"video",a.eventName);if(!t.mapper.isExists("track/video"))return void t.log.warn("Mapping for `track/video` doesn't exist");var i=t.mapper.map("track/video",n,{});this._trackDefault(n,i)},t.subOn("track/video/{eventName}",this._trackVideo,this),this._trackAbVariation=function(e,a){if(!this._active)return void t.moduleActive.addOnce((0,p.default)(this._trackAbVariation,this,e,a),this);var n=this.getEventInfo(e,"abtest",a.eventName);if(!t.mapper.isExists("track/abtest"))return void t.log.warn("Mapping for `track/abtest` doesn't exist");var i=t.mapper.map("track/abtest",n,{});this._trackDefault(n,i)},t.subOn("track/abtest/{abTestName}",this._trackAbVariation,this),this._declare=function(){var t,e=window;e.fbq||(t=e.fbq=function(){t.callMethod?t.callMethod.apply(t,arguments):t.queue.push(arguments)},e._fbq||(e._fbq=t),t.push=t,t.loaded=!0,t.version="2.0",t.queue=[])},this.init=function(){a.settings.configMapsDelegate(t.mapper),a.generalSettings.mode===m.default.bfaMode.prod?(a.tracker=a.settings.tracker,!a.tracker&&!window[a.extTrackerGlobalName]&&a.settings.extFilesPaths&&a.settings.extFilesPaths.length>0&&(a._declare(),t.domi.onDomReady(function(){a.settings.extFilesPaths.forEach(function(e){t.domi.loadScript({src:e},a.activate,null,a)})},a))):a.tracker={},a._inited=!0,t.moduleInited.dispatch(),a.activate()}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(10),o=n(r),s=a(507),u=n(s),d=a(14),c=n(d),l=a(26),p=n(l),f=a(19),h=n(f),g=a(23),m=n(g);i.defaultId="FacebookIntegration",i.require=["logger","domi","pageInfo","userInfo","mapper","trackingUtils","generalSettings","debugTracker"],e.default=i},333:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){var e={trackingBehavior:m.default.trackingBehavior.byDefault,extTrackerGlobalName:"ga",googleAnalyticsId:"",tracker:null,extFilePath:"//www.google-analytics.com/analytics.js",configMapsDelegate:null,dimensions:[]};this._inited=!1,this._active=!1,this.settings=(0,h.default)(t.settings||{},e),this.generalSettings=t.getGeneralSettings();var a=this;return this.activate=function(){if(!this._active&&this._inited&&this.page){if(!this.tracker&&this.generalSettings.mode===m.default.bfaMode.prod){if(!window[this.settings.extTrackerGlobalName])return;this.tracker=window[this.settings.extTrackerGlobalName],this.tracker("create",this.settings.googleAnalyticsId,"auto"),this.tracker("set","location",this.getLocation()),this.settings.dimensions.forEach(function(t){a.tracker("set","dimension"+t.id,t.value)}),this.user.inApp&&this.tracker("set","referrer",this.user.referrer)}this.page&&this.user&&(this._active=!0,t.moduleActive.dispatch())}},this.getLocation=function(){return(0,o.default)(this.page,"uri.href",document.location.href).split("#")[0]},t.onGeneralSettingsChange(function(){this.generalSettings=t.getGeneralSettings()},this),t.onPageReady(function(){this.page=t.getPageInfo(),this.activate()},this),t.onUserReady(function(){this.user=t.getUserInfo(),this.activate()},this),this._trackDefault=function(e,a,n){if(!this._active)return void t.moduleActive.addOnce((0,p.default)(this._trackDefault,this,e,a,n),this);var i=t.tryConvertToEventInfo(e,a,n);if(t.canTrackEvent(t.moduleId,this.settings.trackingBehavior,i)){if(i.data.page=this.page,i.data.user=this.user,i.data.seedSocialFlags=this.postSeedSocialFlags,!t.mapper.isExists("track/"+a))return void t.log.warn("Mapping for `track/"+a+"` doesn't exist");var r=t.mapper.map("track/"+a,i,{});if(0!==(0,c.default)(r).length)switch(r.label=r.label||"(no label)",this.generalSettings.mode){case m.default.bfaMode.prod:this.tracker("send","event",r.category,r.action,r.label,r.value);break;default:t.debugTracker.trackEvent(i,r)}}},this._trackPage=function(e){if(!this._active)return void t.moduleActive.addOnce((0,p.default)(this._trackPage,this,e),this);var a=t.tryConvertToEventInfo(e,"page","view");if(t.canTrackEvent(t.moduleId,this.settings.trackingBehavior,a))switch(this.generalSettings.mode){case m.default.bfaMode.prod:if(this.tracker("send","pageview"),this.settings.abTestCookie){var n=b.default.readCookie(this.settings.abTestCookie);if(n.length>0)for(var i=0;i<n.length;i++)this.tracker("send","event",{eventCategory:"ABTestRegister",eventAction:n[i].name,eventLabel:n[i].value})}break;default:t.debugTracker.trackEvent(a,{})}},t.subOn("track/page/view",this._trackPage,this),this._trackClick=function(t,e){var a=e.eventName+(e["eventNameParts*"]?"/"+e["eventNameParts*"]:"");this._trackDefault(t,"click",a)},t.subOn("track/click/{eventName}/:eventNameParts*:",a._trackClick,this),this._trackPageExit=function(t,e){t={n:"Page-Exit",data:{scrolledDistance:Math.round(window.scrollY/(document.documentElement.offsetHeight-window.innerHeight)*100)}},this._trackDefault(t,"page",e.eventName)},t.subOn("track/page/exit",this._trackPageExit,this),this._trackNewsletter=function(t,e){this._trackDefault(t,"signup",e.eventName)},t.subOn("track/signup/{eventName}",this._trackNewsletter,this),this._trackAbVariation=function(t,e){this._trackDefault(t,"abtest",e.abTestName)},t.subOn("track/abtest/{abTestName}",this._trackAbVariation,this),this._trackQuiz=function(t,e){this._trackDefault(t,"quiz",e.eventName)},t.subOn("track/quiz/{eventName}",this._trackQuiz,this),this._trackScroll=function(t,e){this._trackDefault(t,"scroll",e.eventName)},t.subOn("track/scroll/{eventName}",this._trackScroll,this),this._trackVideo=function(t,e){this._trackDefault(t,"video",e.eventName)},t.subOn("track/video/{eventName}",this._trackVideo,this),{init:function(){if(!(0,u.default)(a.settings.googleAnalyticsId))return void t.log.error("Must set googleAnalyticsId");a.settings.configMapsDelegate(t.mapper),a.generalSettings.mode===m.default.bfaMode.prod?(a.tracker=a.settings.tracker,a.tracker||window[a.settings.extTrackerGlobalName]||!a.settings.extFilePath||t.domi.loadScript({src:a.settings.extFilePath},a.activate,null,a)):a.tracker={},a._inited=!0,t.moduleInited.dispatch(),a.activate()}}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(10),o=n(r),s=a(20),u=n(s),d=a(19),c=n(d),l=a(26),p=n(l),f=a(14),h=n(f),g=a(23),m=n(g),v=a(33),b=n(v);i.defaultId="GAIntegration",i.require=["logger","domi","trackingUtils","generalSettings","mapper","debugTracker","pageInfo","userInfo"],e.default=i},334:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){var e={trackingBehavior:b.default.trackingBehavior.byDefault,extTrackerGlobalName:"LOTCC",tracker:null,configMapsDelegate:null,extFilesPaths:[]};this._inited=!1,this._active=!1,this.settings=(0,h.default)(t.settings||{},e),this.generalSettings=t.getGeneralSettings();var a=this;this.activate=function(){if(!a._active&&a._inited){if(!a.tracker&&a.generalSettings.mode===b.default.bfaMode.prod){if(!window[a.settings.extTrackerGlobalName])return;a.tracker=window[a.settings.extTrackerGlobalName]}a.page&&a.user&&!(0,p.default)(a.postSeedSocialFlags)&&!(0,p.default)(a.poundId)&&(a._active=!0,t.moduleActive.dispatch())}},t.onGeneralSettingsChange(function(){a.generalSettings=t.getGeneralSettings()},this),t.onPageReady(function(){a.page=t.getPageInfo(),a.activate()},this),t.onUserReady(function(){a.user=t.getUserInfo(),a.activate()},this),t.onPostSeedSocialFlagsReady(function(){a.postSeedSocialFlags=t.getPostSeedSocialFlags(),a.activate()},this),t.onPoundIdReady(function(){a.poundId=t.getPoundId().poundId,a.activate()},this),this._addToTrackerFromDto=function(t,e){m.default.forOwn(e,function(e,a){(0,c.default)(e)?e.forEach(function(e){t.add(a,e)}):t.add(a,e)})},this._trackDefault=function(e,a,n,i){if(!this._active)return void t.moduleActive.addOnce((0,u.default)(this._trackDefault,this,e,a,n,i),this);var r=t.tryConvertToEventInfo(e,a,n);if(t.canTrackEvent(t.moduleId,this.settings.trackingBehavior,r)){r.data.page=this.page,r.data.user=this.user,r.data.seedSocialFlags=this.postSeedSocialFlags,r.data.poundId=this.poundId;var s=i?"track/page/view":"track/"+a;if(!t.mapper.isExists(s))return void t.log.warn("Mapping for `"+s+"` doesn't exist");var d=t.mapper.map(s,r,{});if((0,o.default)(d).length>0)switch(this.generalSettings.mode){case b.default.bfaMode.prod:this._addToTrackerFromDto(this.tracker,d),this.tracker.bcp();break;default:t.debugTracker.trackEvent(r,d)}}},this._trackPage=function(t){this._trackDefault(t,"page","view",!0)},t.subOn("track/page/view",this._trackPage,this),this._trackClick=function(t,e){this._trackDefault(t,"click",e.eventName,!1)},t.subOn("track/click/{eventName}",this._trackClick,this),this._trackQuiz=function(t,e){this._trackDefault(t,"quiz",e.eventName,!1)},t.subOn("track/quiz/{eventName}",this._trackQuiz,this),this.init=function(){a.settings.configMapsDelegate(t.mapper),a.generalSettings.mode===b.default.bfaMode.prod?(a.tracker=a.settings.tracker,!a.tracker&&!window[a.extTrackerGlobalName]&&a.settings.extFilesPaths&&a.settings.extFilesPaths.length>0&&t.domi.onDomReady(function(){a.settings.extFilesPaths.forEach(function(e){t.domi.loadScript({src:e,id:"LOTCC_6942"},a.activate,null,a)})},a)):a.tracker={},a._inited=!0,t.moduleInited.dispatch(),a.activate()}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(19),o=n(r),s=a(26),u=n(s),d=a(7),c=n(d),l=a(30),p=n(l),f=a(14),h=n(f),g=a(33),m=n(g),v=a(23),b=n(v);i.defaultId="LotameIntegration",i.require=["logger","domi","pageInfo","userInfo","mapper","trackingUtils","generalSettings","debugTracker","postSeedSocialFlags","poundId"],e.default=i},335:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){function e(t,e){l._playheadCounter&&r({playheadPosition:l._playheadCounter}),t.playheadPosition=e||0,l._playheadCounter=t.playheadPosition,l._lastPlayed=t.assetid,l._loadedData=!0,l.videoTracker.ggPM("loadMetadata",t),l._loadedVideos||(l._loadedVideos={}),l._loadedVideos[t.assetid]||(l._loadedVideos[t.assetid]=t),n(t)}function a(t){l._playheadInterval&&(clearInterval(l._playheadInterval),l._playheadInterval=null),l._playheadCounter=t.playheadPosition,l._playheadInterval||(l.videoTracker.ggPM("play",t),s(),l._playheadInterval=setInterval(function(){s()},1e3))}function n(t){return l._lastPlayed!==t.assetid?(l._playheadInterval&&(clearInterval(l._playheadInterval),l._playheadInterval=null),void(l._loadedVideos&&l._loadedVideos[t.assetid]&&e(l._loadedVideos[t.assetid],t.playheadPosition))):!l._loadedData&&l._loadedVideos&&l._loadedVideos[t.assetid]?void e(l._loadedVideos[t.assetid]):(l._playheadCounter=t.playheadPosition,void(l._playheadInterval||(l.videoTracker.ggPM("play",t),s(),l._playheadInterval=setInterval(function(){s()},1e3))))}function i(t){l._playheadInterval&&(clearInterval(l._playheadInterval),l._playheadInterval=null,l._playheadCounter=t.playheadPosition,l.videoTracker.ggPM("stop",l._playheadCounter))}function r(t){l._playheadCounter&&(clearInterval(l._playheadInterval),l._playheadCounter=t.playheadPosition,l.videoTracker.ggPM("end",l._playheadCounter),l._playheadInterval=null,l._playheadCounter=null,l._loadedData=!1)}function s(){l.videoTracker.ggPM("setPlayheadPosition",l._playheadCounter),l._playheadCounter++}var d={trackingBehavior:c.default.trackingBehavior.byDefault,extTrackerGlobalName:"NOLCMB",staticTracker:null,videoTracker:null,staticConfig:{apid:"P7A907367-6D97-4DFD-AF90-B51EDF8D9AC5",sfcode:"dcr",nsdkv:"511",apn:"BuzzFeed Webapp Static"},videoConfig:{apid:"P3816F089-E5B5-4BF1-9D71-A955F54BCDE3",sfcode:"dcr",nsdkv:"511",apn:"buzzfeedVideos"},configMapsDelegate:null,extFilesPaths:[],trackers:[]};this._inited=!1,this._active=!1,this.settings=(0,u.default)(t.settings||{},d),this.generalSettings=t.getGeneralSettings();var l=this;this._canInitializeTracker=function(t){return 0===this.settings.trackers.length||-1!==this.settings.trackers.indexOf(t)},this.activate=function(){if(!this._active&&this._inited){if(this.generalSettings.mode===c.default.bfaMode.prod){if(!window[this.settings.extTrackerGlobalName])return;var e=window[this.settings.extTrackerGlobalName];!this.staticTracker&&this._canInitializeTracker("static")&&(this.staticTracker=e.getInstance("static_instance"),this.staticTracker.ggInitialize(this.settings.staticConfig)),!this.videoTracker&&this._canInitializeTracker("video")&&(this.videoTracker=e.getInstance("video_instance"),this.videoTracker.ggInitialize(this.settings.videoConfig))}this.page&&(l._active=!0,t.moduleActive.dispatch())}},t.onGeneralSettingsChange(function(){l.generalSettings=t.getGeneralSettings()},this),t.onPageReady(function(){l.page=t.getPageInfo(),l.activate()},this),this.getEventInfo=function(e,a,n){var i=t.tryConvertToEventInfo(e,a,n);return t.canTrackEvent(t.moduleId,this.settings.trackingBehavior,i)?(i.data.page=this.page,i):(t.log.warn("Event won't be tracked to Nielsen because of `Event type` and `Tracking behavior`. Type: "+i.t+"; Name: "+i.n+"; Location: "+i.l+"; Desc: "+i.d+";"),null)},this._trackPage=function(e){if(!this._active)return void t.moduleActive.addOnce((0,o.default)(this._trackPage,this,e),this);if(!t.mapper.isExists("track/page/view"))return void t.log.warn("Mapping for `track/page/view` doesn't exist");var a=this.getEventInfo(e,"page","view");if(a){var n=t.mapper.map("track/page/view",a,{});this.generalSettings.mode===c.default.bfaMode.prod?this.staticTracker.ggPM("staticstart",n):t.debugTracker.trackEvent(a,n)}},t.subOn("track/page/view",this._trackPage,this),this._trackVideo=function(s,u){if(!this._active)return void t.moduleActive.addOnce((0,o.default)(this._trackVideo,this,s,u),this);if(!t.mapper.isExists("track/video"))return void t.log.warn("Mapping for `track/video` doesn't exist");var d=this.getEventInfo(s,"video",u.eventName);if(d){var l=t.mapper.map("track/video",d,{});if(this.generalSettings.mode===c.default.bfaMode.prod)switch(u.eventName){case"load":e(l);break;case"play":n(l);break;case"pause":i(l);break;case"finish":r(l);break;case"scrub":a(l)}else t.debugTracker.trackEvent(d,l)}},t.subOn("track/video/{eventName}",this._trackVideo,this),this.init=function(){l.settings.configMapsDelegate(t.mapper),l.generalSettings.mode===c.default.bfaMode.prod?(l.staticTracker=l.settings.staticTracker,l.videoTracker=l.settings.videoTracker,!l.staticTracker&&!l.videoTracker&&!window[l.extTrackerGlobalName]&&l.settings.extFilesPaths&&l.settings.extFilesPaths.length>0&&t.domi.onDomReady(function(){l.settings.extFilesPaths.forEach(function(e){t.domi.loadScript({src:e},l.activate,null,l)})},l)):(l.staticTracker={},l.videoTracker={}),l._inited=!0,t.moduleInited.dispatch(),l.activate()}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(26),o=n(r),s=a(14),u=n(s),d=a(23),c=n(d);i.defaultId="NielsenIntegration",i.require=["logger","domi","pageInfo","mapper","trackingUtils","generalSettings","debugTracker"],e.default=i},336:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){var e={trackingBehavior:t.defs.trackingBehavior.byDefault,extTrackerGlobalName:"pintrk",tracker:null,configMapsDelegate:null,extFilesPaths:[],pinterestTagId:"2615790681679"};this._inited=!1,this._active=!1,this.settings=(0,c.default)(t.settings||{},e),this.generalSettings=t.getGeneralSettings();var a=this;return this.activate=function(){if(!a._active&&a._inited){if(!this.tracker&&this.generalSettings.mode===t.defs.bfaMode.prod){if(!window[this.settings.extTrackerGlobalName])return;this.tracker=window[this.settings.extTrackerGlobalName],this.tracker("load",this.settings.pinterestTagId)}this.page&&(this._active=!0,t.moduleActive.dispatch())}},t.onGeneralSettingsChange(function(){a.generalSettings=t.getGeneralSettings()},this),t.onPageReady(function(){a.page=t.getPageInfo(),a.activate()},this),this.getEventInfo=function(e,a,n){var i=t.tryConvertToEventInfo(e,a,n);return t.canTrackEvent(t.moduleId,this.settings.trackingBehavior,i)?(i.data.page=this.page,i):(t.log.warn(t.moduleId+" cannot track current event. Type: "+a+"; Name: "+n+";"),null)},this._trackDefault=function(e,a){if(e&&null!==a&&(0,u.default)(a).length>0)switch(this.generalSettings.mode){case t.defs.bfaMode.prod:this.tracker(e.t,a);break;default:t.debugTracker.trackEvent(e,a)}},this._trackPage=function(e){if(!this._active)return void t.moduleActive.addOnce((0,o.default)(this._trackPage,this,e),this);var a=this.getEventInfo(e,"page","view");if(!t.mapper.isExists("track/page/view"))return void t.log.warn("Mapping for `track/page/view` doesn't exist");var n=t.mapper.map("track/page/view",a,{});this._trackDefault(a,n)},t.subOn("track/page/view",this._trackPage,this),{init:function(){a.settings.configMapsDelegate(t.mapper),a.generalSettings.mode===t.defs.bfaMode.prod?(a.tracker=a.settings.tracker,!a.tracker&&!window[a.settings.extTrackerGlobalName]&&a.settings.extFilesPaths&&a.settings.extFilesPaths.length>0&&(window[a.settings.extTrackerGlobalName]=function(){window[a.settings.extTrackerGlobalName].queue.push(Array.prototype.slice.call(arguments))},window[a.settings.extTrackerGlobalName].queue=[],window[a.settings.extTrackerGlobalName].version="3.0",t.domi.onDomReady(function(){a.settings.extFilesPaths.forEach(function(e){t.domi.loadScript({src:e},a.activate,null,a)})},a))):a.tracker={},a._inited=!0,t.moduleInited.dispatch(),a.activate()}}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(26),o=n(r),s=a(19),u=n(s),d=a(14),c=n(d);i.defaultId="pinterestIntegration",i.require=["logger","domi","pageInfo","mapper","trackingUtils","generalSettings","debugTracker"],e.default=i},337:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=this,a=_.default.queryStringToObject(document.location.search),n={sessionId:Date.now().toString(32)+(1e8*Math.random()|0).toString(32),e2e:a.e2e_test,impressionsSamplingRate:1,scrollDepthSamplingRate:1,instrumentationSamplingRate:1,performanceSamplingRate:1};this._inited=!1,this._active=!1,this.generalSettings=t.getGeneralSettings(),this.settings=(0,p.default)(t.settings||{},n);var i=this;this.activate=function(){!i._active&&i._inited&&i.poundId&&this.page&&this.user&&!(0,c.default)(this.postSeedSocialFlags)&&!(0,c.default)(this.poundId)&&(i.pixiedust=new m.default,i.pixiedust.setSessionVars({session_id:i.settings.sessionId,client_id:i.poundId,source:"buzz_web"}),i.pixiedust.start({env:i.generalSettings.env,sampling_rate:i.settings.samplingRate||0,sampling_rate_options:{buzz_recommendation_impression:i.settings.poundSamplingRate||0,buzz_recommendation_click:i.settings.poundSamplingRate||0}}),i._active=!0,t.moduleActive.dispatch())},t.onGeneralSettingsChange(function(){i.generalSettings=t.getGeneralSettings()},this),t.onPageReady(function(){i.page=t.getPageInfo(),i.activate()},this),t.onUserReady(function(){i.user=t.getUserInfo(),i.activate()},this),t.onPostSeedSocialFlagsReady(function(){i.postSeedSocialFlags=t.getPostSeedSocialFlags(),i.activate()},this),t.onPoundIdReady(function(){i.poundId=t.getPoundId().poundId,i.activate()},this),this.getEventInfo=function(e,a,n){var i=t.tryConvertToEventInfo(e,a,n);return t.canTrackEvent(t.moduleId,this.settings.trackingBehavior,i)?(i.data.page=this.page,i.data.user=this.user,i.data.seedSocialFlags=this.postSeedSocialFlags,i.data.poundId=this.poundId,i):(t.log.warn(t.moduleId+" cannot track current event. Type: "+a+"; Name: "+n+";"),null)},this._shouldTrack=function(t){return!("dev"!==e.generalSettings.env&&!e.generalSettings.debug)||e.poundId&&e.poundId%100<100*t},this._shouldSample=function(t){return!("dev"!==e.generalSettings.env&&!e.generalSettings.debug)||Math.random()<t},this._trackPage=function(e){if(!this._active)return void t.moduleActive.addOnce((0,h.default)(this._trackPage,this,e),this);if(!t.mapper.isExists("track/page/view"))return void t.log.warn("Mapping for `pixiedust: track/page/view` doesn't exist");var a=i.getEventInfo(e,"page","view");this._trackDefault(a,"track/page/view")},t.subOn("track/page/view",this._trackPage,this),this._trackPageExit=function(e){if(!this._active)return void t.moduleActive.addOnce((0,h.default)(this._trackPageExit,this,e),this);if(!t.mapper.isExists("track/page/exit"))return void t.log.warn("Mapping for `pixiedust: track/page/exit` doesn't exist");var a=i.getEventInfo(e,"page","exit");this._trackDefault(a,"track/page/exit",!0)},t.subOn("track/page/exit",this._trackPageExit,this),this._trackClick=function(e,a){if(!this._active)return void t.moduleActive.addOnce((0,h.default)(this._trackClick,this,e,a),this);if(!t.mapper.isExists("track/click"))return void t.log.warn("Mapping for `track/click` doesn't exist");var n=this.getEventInfo(e,"click",a.eventName);this._trackDefault(n,"track/click",!0)},t.subOn("track/click/{eventName}",this._trackClick,this),this._trackVideo=function(e,a){if(!this._active)return void t.moduleActive.addOnce((0,h.default)(this._trackVideo,this,e,a),this);if(!t.mapper.isExists("track/video"))return void t.log.warn("Mapping for `track/video` doesn't exist");var n=this.getEventInfo(e,"video",a.eventName);this._trackDefault(n,"track/video")},t.subOn("track/video/{eventName}",this._trackVideo,this),this._trackVideoPlayer=function(e,a){if(!this._active)return void t.moduleActive.addOnce((0,h.default)(this._trackVideoPlayer,this,e,a),this);if(!t.mapper.isExists("track/videoplayer"))return void t.log.warn("Mapping for `track/videoplayer` doesn't exist");var n=this.getEventInfo(e,"videoplayer",a.eventName);if(n&&"flush"===n.n)return this.pixiedust.flush();this._trackDefault(n,"track/videoplayer")},t.subOn("track/videoplayer/{eventName}",this._trackVideoPlayer,this),this._trackPound=function(e,a){if(!this._active)return void t.moduleActive.addOnce((0,h.default)(this._trackPound,this,e,a),this);if(!t.mapper.isExists("track/pound"))return void t.log.warn("Mapping for `track/pound` doesn't exist");var n=this.getEventInfo(e,"pound",a.eventName),i=!(!n||"share"!==n.n);this._trackDefault(n,"track/pound",i)},t.subOn("track/pound/{eventName}",this._trackPound,this),this._trackImpression=function(e,a){if(!this._active)return void t.moduleActive.addOnce((0,h.default)(this._trackImpression,this,e,a),this);if(!t.mapper.isExists("track/scroll/impression"))return void t.log.warn("Mapping for `track/scroll/impression` doesn't exist");if(!this._shouldTrack(this.settings.impressionsSamplingRate))return void t.log.warn("`track/scroll/impression` will not be tracked: events from current user are not being sampled");var n=this.getEventInfo(e,"impression",a.eventName);this._trackDefault(n,"track/scroll/impression")},t.subOn("track/scroll/impression",this._trackImpression,this),this._trackScrollPost=function(e,a){if(!this._active)return void t.moduleActive.addOnce((0,h.default)(this._trackScrollPost,this,e,a),this);if(!t.mapper.isExists("track/scroll/post"))return void t.log.warn("Mapping for `track/scroll/post` doesn't exist");if(!this._shouldTrack(this.settings.scrollDepthSamplingRate))return void t.log.warn("`track/scroll/post` will not be tracked: events from current user are not being sampled");var n=this.getEventInfo(e,"post",a.eventName);this._trackDefault(n,"track/scroll/post")},t.subOn("track/scroll/post",this._trackScrollPost,this),this._trackPerformance=function(e){if(!this._active)return void t.moduleActive.addOnce((0,h.default)(this._trackPerformance,this,e),this);if(!t.mapper.isExists("track/website/performance"))return void t.log.warn("Mapping for `pixiedust: track/website/performance` doesn't exist");if(!this._shouldSample(this.settings.performanceSamplingRate))return void t.log.warn("`track/website/custom_timers` event will not be tracked, because it was not sampled.");var a=i.getEventInfo(e,"website","performance");this._trackDefault(a,"track/website/performance",!0)},t.subOn("track/website/performance",this._trackPerformance,this),this._trackCustomPerformance=function(e){if(!this._active)return void t.moduleActive.addOnce((0,h.default)(this._trackCustomPerformance,this,e),this);if(!t.mapper.isExists("track/website/custom_timers"))return void t.log.warn("Mapping for `pixiedust: track/website/custom_timers` doesn't exist");if(!this._shouldSample(this.settings.performanceSamplingRate))return void t.log.warn("`track/website/custom_timers` event will not be tracked, because it was not sampled.");var a=i.getEventInfo(e,"website","custom_timers");this._trackDefault(a,"track/website/custom_timers",!0)},t.subOn("track/website/custom_timers",this._trackCustomPerformance,this),this._trackAbVariation=function(e,a){if(!this._active)return void t.moduleActive.addOnce((0,h.default)(this._trackAbVariation,this,e,a),this);if(!t.mapper.isExists("track/abtest"))return void t.log.warn("Mapping for `track/abtest` doesn't exist");var n=this.getEventInfo(e,"abtest",a.abTestName);this._trackDefault(n,"track/abtest")},t.subOn("track/abtest/{abTestName}",this._trackAbVariation,this),this._trackAbeagleRequest=function(e,a){if(!this._active)return void t.moduleActive.addOnce((0,h.default)(this._trackAbeagleRequest,this,e,a),this);if(!t.mapper.isExists("track/abeagle/request"))return void t.log.warn("Mapping for `track/abeagle/request` doesn't exist");var n=this.getEventInfo(e,"abeagle","request");this._trackDefault(n,"track/abeagle/request")},t.subOn("track/abeagle/request",this._trackAbeagleRequest,this),this._trackQuiz=function(e,a){if(!this._active)return void t.moduleActive.addOnce((0,h.default)(this._trackQuiz,this,e,a),this);if(!t.mapper.isExists("track/quiz"))return void t.log.warn("Mapping for `track/quiz` doesn't exist");var n=this.getEventInfo(e,"quiz",a.eventName);this._trackDefault(n,"track/quiz")},t.subOn("track/quiz/{eventName}",this._trackQuiz,this),this._trackInstrumentation=function(a){if(!e._active)return void t.moduleActive.addOnce((0,h.default)(e._trackInstrumentation,e,a),e);if(!t.mapper.isExists("track/website/instrumentation"))return void t.log.warn("Mapping for `track/website/instrumentation` doesn't exist");var n=(0,o.default)(a,"opts.samplingRate",e.settings.instrumentationSamplingRate);if(!e._shouldSample(n))return void t.log.warn("`track/website/instrumentation` event will not be tracked, because it was not sampled.");var r=i.getEventInfo(a,"website","instrumentation");e._trackDefault(r,"track/website/instrumentation")},t.subOn("track/website/instrumentation",this._trackInstrumentation,this),this._trackDefault=function(e,a,n){if(e){e.data.env=this.generalSettings.mode===b.default.bfaMode.prod?"prod":"dev",e.data.debug=this.generalSettings.debug;var i=t.mapper.map(a,e,{});(0,u.default)(i).length>0&&(this.settings.e2e&&(i.e2e_test=this.settings.e2e),this.pixiedust.push(i),n&&this.pixiedust.flush(),this.generalSettings.mode!==b.default.bfaMode.prod&&t.debugTracker.trackEvent(e,i))}},this.init=function(){i.settings.configMapsDelegate(t.mapper),i._inited=!0,t.moduleInited.dispatch(),i.activate()}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(10),o=n(r),s=a(19),u=n(s),d=a(30),c=n(d),l=a(14),p=n(l),f=a(26),h=n(f),g=a(369),m=n(g),v=a(23),b=n(v),y=a(33),_=n(y);i.defaultId="PixiedustIntegration",i.require=["logger","pageInfo","userInfo","debugTracker","mapper","trackingUtils","generalSettings","postSeedSocialFlags","poundId"],e.default=i},338:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){var e={trackingBehavior:h.default.trackingBehavior.byDefault,extTrackerGlobalName:"_qevents",quantcastPcode:"",tracker:null,extFilePath:"https://secure.quantserve.com/quant.js",configMapsDelegate:null};this._inited=!1,this._active=!1,this.settings=(0,p.default)(t.settings||{},e),this.generalSettings=t.getGeneralSettings();var a=this;return this.activate=function(){if(!this._active&&this._inited){if(!this.tracker&&this.generalSettings.mode===h.default.bfaMode.prod){if(!window[this.settings.extTrackerGlobalName])return;this.tracker=window[this.settings.extTrackerGlobalName]}this.page&&(this._active=!0,t.moduleActive.dispatch())}},t.onGeneralSettingsChange(function(){this.generalSettings=t.getGeneralSettings()},this),t.onPageReady(function(){this.page=t.getPageInfo(),this.activate()},this),this.getEventInfo=function(e,a,n){var i=t.tryConvertToEventInfo(e,a,n);return t.canTrackEvent(t.moduleId,this.settings.trackingBehavior,i)?(i.data.page=this.page,i):(t.log.warn(t.moduleId+" cannot track current event. Type: "+a+"; Name: "+n+";"),null)},this._trackDefault=function(e,a){if(null!==a&&(0,c.default)(a).length>0)switch(this.generalSettings.mode){case h.default.bfaMode.prod:this.tracker.push(a);break;default:t.debugTracker.trackEvent(e,a)}},this._trackPage=function(e){if(!this._active)return void t.moduleActive.addOnce((0,u.default)(this._trackPage,this,e),this);var a=this.getEventInfo(e,"page","view");if(a)return t.mapper.isExists("track/page/view")?void this._trackDefault(a,t.mapper.map("track/page/view",a,{qacct:this.settings.quantcastPcode})):void t.log.warn("Mapping for `track/page/view` doesn't exist")},t.subOn("track/page/view",this._trackPage,this),{init:function(){if(!(0,o.default)(a.settings.quantcastPcode))return void t.log.error("Value for Quantcast pcode must be set");a.settings.configMapsDelegate(t.mapper),a.generalSettings.mode===h.default.bfaMode.prod?(a.tracker=a.settings.tracker,a.tracker||window[a.settings.extTrackerGlobalName]||!a.settings.extFilePath||t.domi.loadScript({src:a.settings.extFilePath},a.activate,null,a)):a.tracker={},a._inited=!0,t.moduleInited.dispatch(),a.activate()}}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(20),o=n(r),s=a(26),u=n(s),d=a(19),c=n(d),l=a(14),p=n(l),f=a(23),h=n(f);i.defaultId="QuantcastIntegration",i.require=["logger","domi","trackingUtils","generalSettings","mapper","debugTracker","pageInfo"],e.default=i},339:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){this.settings=e||{},this._binderBuilder=new u.default;var a=this;return t._router.sub("plugin/binder/activate",function(e){(0,o.default)(a.settings,e||{}),(0,o.default)(a._binderBuilder.buildConfig,a.settings),t.domi.onDomReady(function(){var e=a._binderBuilder.build();null!==e&&(window.bfaBinder=e,t._router.sub("plugin/binder/trigger",window.bfaBinder.trigger.bind(window.bfaBinder)))})},this,null,!0),{}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(48),o=n(r),s=a(319),u=n(s),d=a(52),c=n(d);window.bfaBinder={parser:new c.default},i.defaultId="binder",i.require=["domi"],e.default=i},340:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){function a(){this._bfaMode=t._generalSettings.mode}function n(e,a){if(e instanceof h.default&&a){if(!(0,u.default)(r.settings.appendersConfig,r._bfaMode))return;for(var n=r.settings.appendersConfig[r._bfaMode],i=0;i<n.length;i++)(0,u.default)(r,n[i])&&r[n[i]].trackEvent(this.instanceId,e,a)}else t.log.warn("DebugTracker: can't store event data for "+this.instanceId+": not valid arguments")}function i(t){if(!(0,o.default)(t)||""===t)throw new Error("Error occurred on _createDebugTracker call: instanceId arg has to be not empty string");return{instanceId:t,trackEvent:n}}e=e||{},this.defaultSettings={storageKeyName:"bfa_debugStore",appendersConfig:{}},this.defaultSettings.appendersConfig[t.defs.bfaMode.develop]=[g.logger],this.defaultSettings.appendersConfig[t.defs.bfaMode.test]=[g.sessionStorage,g.logger],this.settings=(0,p.default)(e,this.defaultSettings),this._bfaMode=t._generalSettings.mode,t._onGeneralSettingsChange.add(a,this);var r=this;return this[g.sessionStorage]={trackEvent:function(t,e,a){var n,i=sessionStorage.getItem(r.settings.storageKeyName);n=null===i?{pageHref:document.location.href}:JSON.parse(i),(0,c.default)(n[t])&&(n[t]=[]),n[t].push({eventType:e.t,eventName:e.n,eventLocation:e.l,eventDescription:e.d,dataObject:a}),sessionStorage.setItem(r.settings.storageKeyName,JSON.stringify(n))}},this[g.logger]={trackEvent:function(t,e,a){this.logger.event(t,e,a)}},this[g.logger].logger=t.createLogger("DebugTracker_"+g.logger),t.createDebugTracker=i,{modifySBInstance:function(t){t.debugTracker=i(t.instanceId)}}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(20),o=n(r),s=a(29),u=n(s),d=a(30),c=n(d),l=a(179),p=n(l),f=a(126),h=n(f),g={logger:"loggerAppender",sessionStorage:"sessionStorageAppender"};i.defaultId="debugTracker",i.require=["generalSettings","logger"],i.debugTrackerAppenderTypes=g,e.default=i},341:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){this._core=t,this._isDomReady=!1,this._domReady=new c.default,this._domReady.addOnce(function(){this._isDomReady=!0},this,Number.MAX_VALUE);var e=this;return this._installDomi=function(t){t.domi={onDomReady:function(t,a){e._isDomReady?t.call(a):e._domReady.addOnce(t,a)},loadScript:function(t,e,a,n){function i(){this.onerror=null,this.onload=null,e.apply(n)}function r(){this.onerror=null,this.onload=null,a.apply(n)}var s=document.createElement("script");s.type=t.type||"text/javascript",s.charset=t.charset||"utf8",s.src=t.src,!1!==t.async&&(s.async=!0),(0,u.default)(t.attrs)||p.default.forOwn(t.attrs,function(t,e){s.setAttribute(e,t)}),(0,o.default)(e)&&(s.onload=i),(0,o.default)(a)&&(s.onerror=r);var d=document.body||document.getElementsByTagName("body")[0];d&&d.appendChild(s)}}},this._installDomi(t),function(){if("complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState)return void e._domReady.dispatch();if(document.addEventListener)document.addEventListener("DOMContentLoaded",e._domReady.dispatch,!1);else if(document.attachEvent)document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&e._domReady.dispatch()});else{var t=window.onload;window.onload=function(){t&&t(),e._domReady.dispatch()}}}(),{modifySBInstance:function(t){e._installDomi(t)}}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(40),o=n(r),s=a(30),u=n(s),d=a(31),c=n(d),l=a(33),p=n(l);i.defaultId="domi",e.default=i},342:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var a={mode:t.defs.bfaMode.prod,debug:!1};this._core=t;var n=(0,c.default)(e||{},a),i=new p.default;return this.setSettings=function(e){t._generalSettings=(0,u.default)(e||{}),t._onGeneralSettingsChange.dispatch((0,u.default)(t._generalSettings))},this.updateSettings=function(e){t._generalSettings=(0,o.default)(t._generalSettings||{},e||{}),t._onGeneralSettingsChange.dispatch((0,u.default)(t._generalSettings))},t._onGeneralSettingsChange=i,this.setSettings(n),this._core._router.sub("general/settings/set",this.setSettings,this),this._core._router.sub("general/settings/update",this.updateSettings,this),{modifySBInstance:function(e){e.getGeneralSettings=function(){return(0,u.default)(t._generalSettings)},e.onGeneralSettingsChange=function(e,a){t._onGeneralSettingsChange.add(e,a)}}}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(48),o=n(r),s=a(59),u=n(s),d=a(14),c=n(d),l=a(31),p=n(l);i.defaultId="generalSettings",e.default=i},343:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var a={varName:"bfa",eventsArrayName:"c"};if(this.settings=(0,m.default)(e||{},a),this.unhandledEventsArray=null,(0,h.default)(window,this.settings.varName)){var n=(0,p.default)(window,this.settings.varName);if((0,h.default)(n,this.settings.eventsArrayName)&&(0,c.default)(n[this.settings.eventsArrayName])&&(this.unhandledEventsArray=n[this.settings.eventsArrayName],this.unhandledEventsArray.length>0)){(0,u.default)(this.unhandledEventsArray,function(t){return t[0]&&!(0,o.default)(t[0],"track")&&!(0,o.default)(t[0],"module")}).forEach(function(e){t.push.apply(t,e)},this)}}return t.inited.addOnce(function(){window[this.settings.varName]=function(){t.push.apply(t,arguments)},this.unhandledEventsArray&&this.unhandledEventsArray.length>0&&this.unhandledEventsArray.forEach(function(e){t.push.apply(t,e)},this),window.location.search.indexOf("e2e_test")>-1&&document.documentElement.setAttribute("data-bfa-ready","true")},this),{}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(184),o=n(r),s=a(516),u=n(s),d=a(7),c=n(d),l=a(10),p=n(l),f=a(29),h=n(f),g=a(14),m=n(g);i.defaultId="globalBfaEndpoint",e.default=i},344:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){function e(e){e.mode===t.defs.bfaMode.develop||!0===e.debug?!0!==t.log.enabled()&&t.log.enabled(!0):!0===t.log.enabled()&&t.log.enabled(!1)}return t.log=(0,u.default)("BFACore",t._generalSettings.logLevel),t._router.log=t.log,t.createLogger=function(e){return(0,o.default)(e)&&""!==e||t.log.error("core.createLogger: `loggerName` argument must be a not empty string"),(0,u.default)(e,t._generalSettings.logLevel)},t.log.enabled=function(t){return u.default.enabled(t)},e(t._generalSettings),t._onGeneralSettingsChange.add(e,this),{modifySBInstance:function(e){e.log=(0,u.default)(e.instanceId,t._generalSettings.logLevel)}}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(20),o=n(r),s=a(315),u=n(s);i.defaultId="logger",i.require=["generalSettings"],e.default=i},345:function(t,e,a){"use strict";function n(t){this._core=t;var e=this;return this._installMapper=function(t){t.mapper=new r.default},{modifySBInstance:function(t){e._installMapper(t)}}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(316),r=function(t){return t&&t.__esModule?t:{default:t}}(i);n.defaultId="mapper",e.default=n},346:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){function a(t,e){!0===i.settings.isReady&&t.call(e),i.pageReady.add(t,e)}function n(){return(0,u.default)(i.settings.pageInfo)}e=e||{},this.defaultSettings={readyOnFirstUpdate:!0,isReady:!1,pageInfo:{uri:{href:document.location.href.replace(/\/p\/\.[0-9a-zA-Z]+\//,"/"),host:document.location.host,path:document.location.pathname.replace(/^\/p\/\.[0-9a-zA-Z]+\//,"/"),search:document.location.search,hash:document.location.hash,protocol:document.location.protocol}}},function(){if(window.history&&window.history.replaceState&&document.location.search){var t=["bfseed"],e=b.default.queryStringToObject(document.location.search),a=Object.keys(e).filter(function(a){return-1===t.indexOf(a)||((0,o.default)(window,"BZFD.Context.page."+a,e[a]),!1)}).map(function(t){return void 0===e[t]?encodeURIComponent(t):encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&");try{window.history.replaceState(null,null,"?"+a+document.location.hash)}catch(t){window.raven&&window.raven.captureException(t)}}}(),this.pageReady=new m.default,this.pageChanged=new m.default,this.settings=(0,h.default)(e,this.defaultSettings);var i=this;return t._router.sub("general/page/{action}",function(e,a){if("ready"===a.action)return void(this.isReady||(this.isReady=!0,this.pageReady.dispatch()));if(!(0,p.default)(e))return void t.log.warn("page info must be a plain object");switch(a.action){case"set":this.settings.pageInfo=e;break;case"update":default:this.settings.pageInfo=(0,c.default)(this.settings.pageInfo,e)}this.pageChanged.dispatch(),!this.settings.isReady&&this.settings.readyOnFirstUpdate&&(this.settings.isReady=!0,this.pageReady.dispatch())},this,{action:["ready","update","set"]}),t._onPageReady=function(t,e){a(t,e)},t._getPageInfo=function(){return n()},{modifySBInstance:function(t){t.getPageInfo=function(){return n()},t.onPageReady=function(t,e){a(t,e)},t.onPageChanged=function(t,e,a){i.pageChanged[a?"addOnce":"add"](t,e)}}}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(183),o=n(r),s=a(59),u=n(s),d=a(48),c=n(d),l=a(63),p=n(l),f=a(14),h=n(f),g=a(31),m=n(g),v=a(33),b=n(v);i.defaultId="pageInfo",e.default=i},347:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){function a(t,e){!0===i.settings.isReady&&t.call(e),i.seedSocialFlagsReady.add(t,e)}function n(){return(0,u.default)(i.settings.seedSocialFlags)}e=e||{},this.defaultSettings={isReady:!1,seedSocialFlags:void 0},this.utils=t.utils,this.settings=(0,c.default)(e,this.defaultSettings),this.seedSocialFlagsReady=new p.default;var i=this;return i.settings.isReady||(t._onPageReady(function(){this.settings.pageInfo=t._getPageInfo(),this.tryCalculate()},this),t._onUserReady(function(){this.settings.userInfo=t._getUserInfo(),this.tryCalculate()},this)),this.tryCalculate=function(){this.settings.isReady||this.settings.pageInfo&&this.settings.userInfo&&(this.settings.seedSocialFlags=this.calculate(this.settings.pageInfo,this.settings.userInfo),this.settings.isReady=!0,this.seedSocialFlagsReady.dispatch())},t._onPostSeedSocialFlagsReady=function(t,e){a(t,e)},t._getPostSeedSocialFlags=function(){return n()},{modifySBInstance:function(t){t.getPostSeedSocialFlags=function(){return n()},t.onPostSeedSocialFlagsReady=function(t,e){a(t,e)}},calculate:function(t,e){return i.calculate(t,e)}}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(10),o=n(r),s=a(59),u=n(s),d=a(14),c=n(d),l=a(31),p=n(l);i.prototype.calculate=function(t,e){var a=null;return t.post&&(a=this.calculateFlags(t,e)),a},i.prototype.isPromotedPost=function(t){return!0===(0,o.default)(t,"post.isPromoted",!1)},i.prototype.isBuzzFeedRegex=/^https?:\/\/([^\/]+\.)?buzzfeed\.com(\/|$)/i,i.prototype.isBuzzFeedReferrer=function(t,e){if(!e.referrer||!e.referrer.match(this.isBuzzFeedRegex))return!1;if(0===t.uri.path.indexOf("/h2/")&&e.referrer.indexOf("buzzfeed.com/h1/")>-1){var a=null,n=this.utils.readCookie("HT_PRIMARY"),i=n.length>0?n[0].value:void 0;if(void 0!==i){var r=decodeURIComponent(i);r.length>4&&"not_available"!==r[4]&&(a=r[4])}if(null===a||!a.match(this.isBuzzFeedRegex))return!1}return!0},i.prototype.removeUtmSource=function(t){if(-1===t.indexOf("utm_source=sodisco"))return!1;var e=new RegExp("[?&]utm_source=sodisco"),a=t.replace(e,"");"?"!==a.trim()&&"&"!==a.trim()||(a="");var n=window.location.pathname+a+window.location.hash;return window.history.replaceState({},null,n),!0},i.prototype.calculateFlags=function(t,e){if(!t||!e)return null;var a={seed:!1,social:!1,sodisco:!1},n=this.utils.readCookie("BUZZ_WIDGET"),i=n.length>0?n[0].value:void 0;return i&&t.uri.href.indexOf(i)>-1||window.IS_HASH_WIDGET_CLICK?(a.seed=!0,a.sodisco=!0):!0===this.isBuzzFeedReferrer(t,e)?t.uri.search.match(/([&\?]+b=1)/)?a.social=!0:a.seed=!0:0===t.uri.path.indexOf("/h2/")?(a.social=!0,a.sodisco=!0):a.social=!0,this.removeUtmSource(t.uri.search)&&(a.sodisco=!0,a.seed=!0),a},i.require=["pageInfo","userInfo"],i.defaultId="postSeedSocialFlags",e.default=i},348:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){e=e||{},this.defaultSettings={isReady:!1,enabled:!1,maxAttempts:20,attemptDelay:100},this.poundIdResult=void 0,this.settings=(0,o.default)(e,this.defaultSettings),this.poundIdReadySignal=new u.default;var a=this;return this._onPoundIdReady=function(t,e){!0===a.settings.isReady&&t.call(e),a.poundIdReadySignal.add(t,e)},this._activate=function(){a.settings.isReady=!0,a.poundIdReadySignal.dispatch()},this._getPoundIdFromUrlHash=function(t){var e="";if(window.pound&&window.pound.identity){e=(new window.pound.identity.Unique).unhashed(t.slice(1)).toString()}return{poundId:e,isFromUrl:!0}},this._getPoundIdNative=function(){var t="";return window.bf_visit&&window.bf_visit.unique&&(t=window.bf_visit.unique.unhashed(window.bf_visit.unique.hashed())),{poundId:t,isFromUrl:!1}},t.domi.onDomReady(function(){if(a.settings.enabled)var t=0,e=setInterval(function(){if(""!==window.location.hash)return a.poundIdResult=a._getPoundIdFromUrlHash(window.location.hash),a._activate(),void clearInterval(e);t===a.settings.maxAttempts&&(a.poundIdResult=a._getPoundIdNative(),a._activate(),clearInterval(e)),t++},a.settings.attemptDelay);else a.poundIdResult=a._getPoundIdNative(),a._activate()},this),{modifySBInstance:function(t){t.getPoundId=function(){return a.poundIdResult},t.onPoundIdReady=function(t,e){a._onPoundIdReady(t,e)}}}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(14),o=n(r),s=a(31),u=n(s);i.require=["domi"],i.defaultId="poundId",e.default=i},349:function(t,e,a){"use strict";function n(t,e){e=e||{},this.defaultSettings={cookieName:"bfa_test"},this.settings=(0,r.default)(e,this.defaultSettings);var a=t.utils.readCookie(this.settings.cookieName);return this._isTestMode=a.length>0&&"true"===a[0].value,this.updateGeneralSettings=function(e){e.mode!==t.defs.bfaMode.test&&t.push("general/settings/update",{mode:t.defs.bfaMode.test})},this._isTestMode&&(this.updateGeneralSettings(t._generalSettings),t._onGeneralSettingsChange.add(this.updateGeneralSettings,this)),{}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(14),r=function(t){return t&&t.__esModule?t:{default:t}}(i);n.defaultId="testMode",n.require=["generalSettings"],e.default=n},350:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(){function t(t,e,a){if(!(0,h.default)(t)||0===t.length)return!1;if(!(a instanceof m.default))return!1;var n=-1!==(0,p.default)((0,c.default)(b.default.trackingBehavior),e)?e:b.default.trackingBehavior.byDefault,i=a.opt,r=!1;switch(n){case b.default.trackingBehavior.ifSpecified:(0,u.default)(i)&&(0,o.default)(i.force)&&(-1!==i.force.indexOf("all")||-1!==i.force.indexOf(t))&&(r=!0);break;case b.default.trackingBehavior.byDefault:default:(!(0,u.default)(i)||!(0,o.default)(i.ignore)||-1===i.ignore.indexOf("all")&&-1===i.ignore.indexOf(t)||(0,o.default)(i.force)&&-1!==i.force.indexOf(t))&&(r=!0)}return r}function e(t,e,a){return(t=t||{})instanceof m.default?t:((0,h.default)(t.t)&&0!==t.t.length||(t.t=e),(0,h.default)(t.n)&&0!==t.n.length||(t.n=a),m.default.tryParse(t))}return{modifySBInstance:function(a){a.canTrackEvent=t,a.tryConvertToEventInfo=e}}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(7),o=n(r),s=a(63),u=n(s),d=a(187),c=n(d),l=a(508),p=n(l),f=a(20),h=n(f),g=a(126),m=n(g),v=a(23),b=n(v);i.defaultId="trackingUtils",e.default=i},351:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){function a(t,e){!0===i.settings.isReady&&t.call(e),i.userReady.add(t,e)}function n(){return(0,o.default)(i.settings.userInfo)}e=e||{},this.defaultSettings={readyOnFirstUpdate:!0,isReady:!1,userInfo:{isLoggedIn:!1,referrer:document.referrer,userAgent:navigator.userAgent,inApp:!1}};var i=this;return this.userReady=new h.default,this.userChanged=new h.default,this.settings=(0,p.default)(e,this.defaultSettings),t._router.sub("general/user/{action}",function(e,a){if("ready"===a.action)return void(this.isReady||(this.isReady=!0,this.userReady.dispatch()));if(!(0,c.default)(e))return void t.log.warn("user info must be a plain object");switch(a.action){case"set":this.settings.userInfo=e;break;case"update":default:this.settings.userInfo=(0,u.default)(this.settings.userInfo,e)}var n=this.settings.userInfo,i=t.utils.getAppReferrer(n.userAgent,n.referrer);i&&(n.referrer=i,n.inApp=!0),this.userChanged.dispatch(),!this.settings.isReady&&this.settings.readyOnFirstUpdate&&(this.settings.isReady=!0,this.userReady.dispatch())},this,{action:["ready","update","set"]}),t._onUserReady=function(t,e){a(t,e)},t._getUserInfo=function(){return n()},{modifySBInstance:function(t){t.getUserInfo=function(){return n()},t.onUserReady=function(t,e){a(t,e)},t.onUserChanged=function(t,e,a){i.userChanged[a?"addOnce":"add"](t,e)}}}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(59),o=n(r),s=a(48),u=n(s),d=a(63),c=n(d),l=a(14),p=n(l),f=a(31),h=n(f);i.defaultId="userInfo",e.default=i},368:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){return Object.keys(t).reduce(function(e,a){var n=t[a];return n=null===n||void 0===n?"":n,e[a]=n,e},{})}function r(){var t={};return{queue:[],timeout:null,history:[],transport:h.default,push:function(e){var a=(0,u.default)({},e,t);if(!this.validateData(a))return!1;var n=this.queue[this.queue.length-1];return n&&n.type!==a.type?(this.sendData(),this.push(a),!0):(this.queue.push(a),this.getURL(this.queue).length>m.default.get("urlLengthLimit")?(this.queue.pop(),this.sendData(),this.push(a),!0):(m.default.get("batch")?this.timeout||(this.timeout=setTimeout(this.sendData.bind(this),m.default.get("delay"))):this.sendData(),!0))},validateData:function(t){for(var e=m.default.get("requiredFields"),a=0,n=e.length;a<n;a++)if(!(e[a]in t)){if(m.default.get("debug"))throw new Error("Pixiedust required event field: "+e[a]);return!1}var i=m.default.get("acceptedDataTypes");for(var r in t){var s=t[r],u=o(t[r]);if(null!==s&&void 0!==s&&-1===i.indexOf(u)){if(m.default.get("debug"))throw new Error('Pixiedust: field "'+r+'" is invalid data type: '+u);return!1}}if(this.getURL([t]).length>m.default.get("urlLengthLimit")){if(m.default.get("debug"))throw new Error("Pixiedust: single event exceeds url length limit",t);return!1}return!0},sendData:function(){var t;this.queue&&this.queue.length&&(t=this.getURL(this.queue),this.transport(t),this.history.push(t)),this.queue=[],clearTimeout(this.timeout),this.timeout=null},getURL:function(t){var e=(0,b.default)((0,p.default)(t.map(Object.keys)));t.forEach(function(t){Object.keys(t).forEach(function(e){var a=t[e];null!==a&&void 0!==a||(t[e]="")})}),t=t.map(i);var a=e.reduce(function(e,a){return e[a]=t.map(function(t){return t[a]}),e},{});a._z=Date.now(),a._d=y,a._n=t.length;var n=Object.keys(a).map(function(t){var e=a[t];return e=Array.isArray(e)?e:[e],encodeURIComponent(t)+"="+encodeURIComponent(e.join(y))});return this.url()+"?"+n.join("&")},setSessionVars:function(e){Object.keys(e).forEach(function(t){var a=e[t];null!==a&&void 0!==a||(e[t]="")}),t=(0,c.default)(t,i(e))},setTransport:function(t){if("function"!=typeof t)throw new Error("Pixiedust: transport has to be a function");this.transport=t},url:function(){return m.default.get("trackingURL")+"/v"+m.default.get("apiVersion")+".gif"},getHistory:function(){return this.history.slice()}}}Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=r;var s=a(179),u=n(s),d=a(180),c=n(d),l=a(503),p=n(l),f=a(370),h=n(f),g=a(132),m=n(g),v=a(522),b=n(v),y="\v"},369:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=p.default.get("samplingRateOptions")||{},a=e[t.type],n=(0,c.default)(a)?a:1;return Math.random()<n}Object.defineProperty(e,"__esModule",{value:!0});var r=a(368),o=n(r),s=a(498),u=n(s),d=a(510),c=n(d),l=a(132),p=n(l),f=a(371),h=n(f),g=new o.default,m=function(){this.enabled=!1,this.started=!1,this.version=h.default,this.queue=[]};m.prototype.push=function(t){return this.enabled&&i(t)?g.push(t):(this.queue.push(t),!0)},m.prototype.start=function(t){if(this.started){if(p.default.get("debug"))throw new Error("Pixiedust instance may only be started once")}else if(t=t||{},p.default.init(t.env),p.default.set({samplingRate:t.sampling_rate,samplingRateOptions:(0,u.default)(t.sampling_rate_options)}),this.enabled=Math.random()<p.default.get("samplingRate"),this.started=!0,p.default.get("debug")&&this.setupTestMethods(),this.enabled)for(;this.queue.length;)this.push(this.queue.shift())},m.prototype.setupTestMethods=function(){this.__testHistory=function(){if(!this.enabled&&p.default.get("debug"))throw new Error("Pixiedust is not enabled (perhaps due to sampling)");return g.getHistory()}},m.prototype.setTransport=function(t){if(this.started){if(p.default.get("debug"))throw new Error("Cannot change transport of a started Pixiedust instance.")}else g.setTransport(t)},m.prototype.setSessionVars=g.setSessionVars,m.prototype.flush=g.sendData.bind(g),e.default=m},370:function(t,e,a){"use strict";function n(t){(new Image).src=t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},371:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="1.1.0"},42:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(134),i=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default={renderString:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i.default.compile(t,a).render(e)}}},5:function(t,e,a){"use strict";function n(){return Number(window.innerWidth)}function i(){return window.matchMedia(s).matches}Object.defineProperty(e,"__esModule",{value:!0});var r=a(0),o={xs:0,sm:640,md:832,lg:1024},s="(-webkit-min-device-pixel-ratio: 2)",u={isXsmall:function(){var t=n();return t>=o.xs&&t<o.sm},isSmall:function(){var t=n();return t>=o.sm&&t<o.md},isMedium:function(){var t=n();return t>=o.md&&t<o.lg},isLarge:function(){return n()>=o.lg},isAny:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={xs:this.isXsmall,sm:this.isSmall,md:this.isMedium,lg:this.isLarge},a=0;a<t.length;a++)if(e[t[a]]&&e[t[a]]())return!0;return!1},breakPoint:function(t){var e=Number(window.innerWidth);return o[t]<e},getWindowWidth:function(){return i()?2*n():n()},isRetinaDevice:i};r.Application.addService("solid",function(){return u}),e.default=u},52:function(t,e,a){"use strict";function n(t){this.defaultConfig={start:"@",end:";",separator:":",objectPropertySeparator:",",objectStart:"{",objectEnd:"}",arrayStart:"[",arrayEnd:"]",parts:{action:"a",description:"d",location:"l",data:"e",options:"o"}},this.config=t||this.defaultConfig,this.parse=function(t){var e={},a=t.getAttribute("data-bfa");return e=null===a||""===a?{action:"",location:"",description:"",data:{},options:{}}:this.processAttribute(a),""===e.location&&(e.location=this.findLocation(t.parentElement)),e.action=this.grabDataSource(e.action),e.location=this.grabDataSource(e.location),e.description=this.grabDataSource(e.description),e},this.processAttribute=function(t){var e=[];for(var a in this.config.parts)if(this.config.parts.hasOwnProperty(a)){var n=t.indexOf(this.config.start+this.config.parts[a]+this.config.separator);n>-1&&e.push({part:a,idx:n})}e=e.sort(function(t,e){return t.idx<e.idx?-1:t.idx===e.idx?0:1});for(var i={action:"",location:"",description:"",data:"",options:""},r=0;r<e.length;r++)r<e.length-1?i[e[r].part]=t.substring(e[r].idx,e[r+1].idx):i[e[r].part]=t.substring(e[r].idx);for(var o in i)i.hasOwnProperty(o)&&(i[o]=i[o].replace(this.config.start+this.config.parts[o]+this.config.separator,"").trim(),i[o][i[o].length-1]===this.config.end&&(i[o]=i[o].substring(0,i[o].length-1)));return i.data=this.convertToObject(i.data),i.options=this.convertToObject(i.options),i},this.findLocation=function(t){for(;null!==t&&t.getAttribute;){var e=t.getAttribute("data-bfa");if(null!==e&&""!==e){var a=this.processAttribute(e);if(""===a.location){t=t.parentElement;continue}return a.location}t=t.parentElement}return""},this.objectParseMode={propertyName:1,propertyValue:2,propertyArray:4},this.convertToObject=function(t){var e={};if("string"!=typeof(t=t.trim().replace('"',"").replace("'",""))||0!==t.indexOf(this.defaultConfig.objectStart)||t.indexOf(this.defaultConfig.objectEnd)!==t.length-1)return e;for(var a="",n="",i="",r=this.objectParseMode.propertyName,o=1;o<t.length-1;o++)if(t[o]!==this.defaultConfig.separator||r!==this.objectParseMode.propertyName)switch(r){case this.objectParseMode.propertyArray:if(n||(n=[]),t[o]===this.defaultConfig.arrayEnd){n.push(i.trim()),e[a.trim()]=n,a="",i="",n="",r=this.objectParseMode.propertyName;break}if(t[o]===this.defaultConfig.objectPropertySeparator){n.push(i),i="";break}i+=t[o];break;case this.objectParseMode.propertyValue:t[o]===this.defaultConfig.objectPropertySeparator||o===t.length-2?(e[a.trim()]=(n+(t[o]!==this.defaultConfig.objectPropertySeparator?t[o]:"")).trim(),a="",n="",r=this.objectParseMode.propertyName):n+=t[o];break;case this.objectParseMode.propertyName:t[o]!==this.defaultConfig.objectPropertySeparator&&(a+=t[o])}else t[o+1]&&t[o+1]===this.defaultConfig.arrayStart?(r=this.objectParseMode.propertyArray,o++):r=this.objectParseMode.propertyValue;return e},this.grabDataSource=function(t){if(t.indexOf("source:")>-1){var e=t.replace("source:","").trim();if(e&&window){for(var a=window,n=e.split("."),i=n.pop(),r=0;r<n.length;r++)a=a[n[r]];var o=a[i];if(o)return o()}}return t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},55:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(0),i=void 0,r={init:function(){i=!0,n.Application.broadcast("pound-loaded")},isAvailable:function(){return i},getUserId:function(){if(this.isAvailable())return window.bf_visit.unique.id},addQueryString:function(t){return this.isAvailable()?window.pound.urls._addQueryString(t):t},getQueryString:function(){return this.isAvailable()?window.pound.urls.unescaped.queryStringOnly():null},recordShare:function(t){this.isAvailable()&&window.bf_visit.recordShare(t)}};n.Application.addService("pound",function(){return r}),e.default=r},72:function(t,e,a){"use strict";function n(t){var e=t.getOrCreateMap(d);return e.addMapTo("type","instrumentation"),e.addMapTo("platform","").mapFrom("data.page.platform"),e.addMapTo("edition","").mapFrom("data.page.country"),e.addMapTo("category","").mapFrom(function(t){return(0,r.default)(t,"data.page.category")||"home"}),e.addMapTo(o,"").mapFrom("data."+o),e.addMapTo(s,"").mapFrom("data."+s),e.addMapTo(u,"").mapFrom(function(t){return JSON.stringify((0,r.default)(t,"data."+u,""))}),e}Object.defineProperty(e,"__esModule",{value:!0}),e.path=void 0;var i=a(10),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.map=n;var o="target",s="value",u="tags",d=e.path="track/website/instrumentation"},95:function(t,e,a){"use strict";function n(t){var e=t.getOrCreateMap(r);return e.addMapTo("type","website_performance"),e.addMapTo("kind","performance"),e.addMapTo("page_type","").mapFrom("data.page.type"),e.addMapTo("page_format","").mapFrom("data.page.post.format.type"),e.addMapTo("platform","").mapFrom("data.page.platform"),e.addMapTo("client_id","").mapFrom("data.poundId"),e.addMapTo("be_tcp","").mapFrom("data.connectTime"),e.addMapTo("be_dns","").mapFrom("data.lookupDomainTime"),e.addMapTo("be_latency","").mapFrom(function(t){return t.data.responseEnd-t.data.fetchStart}),e.addMapTo("be_time","").mapFrom(function(t){return t.data.responseStart-t.data.navigationStart}),e.addMapTo("fe_firstpaint","").mapFrom("data.firstPaintTime"),e.addMapTo("fe_page_load","").mapFrom(function(t){return t.data.loadEventEnd-t.data.responseEnd}),e.addMapTo("fe_page_load_full","").mapFrom(function(t){return t.data.loadEventEnd-t.data.navigationStart}),e.addMapTo("fe_time","").mapFrom(function(t){return t.data.loadEventEnd-t.data.responseStart}),e.addMapTo("fe_dom_content_loaded","").mapFrom(function(t){return t.data.domContentLoadedEventStart-t.data.navigationStart}),e}function i(t){var e=t.getOrCreateMap(o);return e.addMapTo("type","website_performance"),e.addMapTo("kind","custom_timer"),e.addMapTo("platform","").mapFrom("data.page.platform"),e.addMapTo("country","").mapFrom("data.page.country"),e.addMapTo("mark_name","").mapFrom("data.markName"),e.addMapTo("mark_value","").mapFrom("data.markValue"),e}Object.defineProperty(e,"__esModule",{value:!0}),e.performanceMap=n,e.customMarkMap=i;var r=e.performanceMapPath="track/website/performance",o=e.customMarkMapPath="track/website/custom_timers"}},[225]);
//# sourceMappingURL=bfa.4817942391aaa6080d79.js.map